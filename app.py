import streamlit as st
from pymongo import MongoClient
import bcrypt
import os
from dotenv import load_dotenv
from PIL import Image
import numpy as np
import tensorflow as tf
import sounddevice as sd
import soundfile as sf
import speech_recognition as sr
from gtts import gTTS
from io import BytesIO
from langchain_google_genai import ChatGoogleGenerativeAI
from langchain_core.messages import HumanMessage, SystemMessage
import torch
import librosa
from transformers import Wav2Vec2ForCTC, Wav2Vec2Processor, VitsModel, AutoTokenizer
import scipy.io.wavfile
import base64

# ======================================
# Load Environment Variables
# ======================================
load_dotenv(os.path.join(os.path.dirname(__file__), '.env'))
GEMINI_API_KEY = os.getenv('GEMINI_API_KEY')

if GEMINI_API_KEY and (GEMINI_API_KEY.startswith('"') or GEMINI_API_KEY.startswith("'")):
    GEMINI_API_KEY = GEMINI_API_KEY.strip('"').strip("'")

# ======================================
# MongoDB Connection (Local)
# ======================================
MONGO_URI = "mongodb://localhost:27017/"
client = MongoClient(MONGO_URI)
db = client["agrivoice_auth"]
users = db["users"]

# ======================================
# Helper Functions
# ======================================
def hash_password(password):
    return bcrypt.hashpw(password.encode('utf-8'), bcrypt.gensalt())

def check_password(password, hashed):
    return bcrypt.checkpw(password.encode('utf-8'), hashed)

def signup_user(name, mobile, password):
    if users.find_one({"mobile": mobile}):
        return False, "Mobile number already registered!"
    hashed_pw = hash_password(password)
    users.insert_one({"name": name, "mobile": mobile, "password": hashed_pw})
    return True, "Account created successfully! Please login."

def login_user(mobile, password):
    user = users.find_one({"mobile": mobile})
    if user and check_password(password, user["password"]):
        return True, user
    return False, None

# ======================================
# Streamlit Config
# ======================================
st.set_page_config(page_title="ðŸŒ¿ AgriVoice", layout="wide")

# ======================================
# Persistent Authentication
# ======================================
if "authenticated" not in st.session_state:
    st.session_state.authenticated = False
if "user_name" not in st.session_state:
    st.session_state.user_name = None

# ======================================
# Authentication Screen
# ======================================
if not st.session_state.authenticated:
    st.title("ðŸ” Welcome to AgriVoice")

    tabs = st.tabs(["Login", "Signup"])

    # ---------- LOGIN ----------
    with tabs[0]:
        st.subheader("ðŸ“± Login with Mobile Number")
        mobile = st.text_input("Mobile Number", max_chars=10, key="login_mobile")
        password = st.text_input("Password", type="password", key="login_password")

        if st.button("Login", key="login_button"):
            if mobile and password:
                success, user = login_user(mobile, password)
                if success:
                    st.session_state.authenticated = True
                    st.session_state.user_name = user["name"]
                    st.success(f"âœ… Welcome back, {user['name']} ðŸ‘‹")
                    st.rerun()
                else:
                    st.error("âŒ Invalid mobile number or password.")
            else:
                st.warning("Please fill all fields.")

    # ---------- SIGNUP ----------
    with tabs[1]:
        st.subheader("ðŸ“ Create a New Account")
        name = st.text_input("Full Name", key="signup_name")
        mobile_signup = st.text_input("Mobile Number (10 digits)", max_chars=10, key="signup_mobile")
        password_signup = st.text_input("Password", type="password", key="signup_password")

        if st.button("Signup", key="signup_button"):
            if name and mobile_signup and password_signup:
                success, msg = signup_user(name, mobile_signup, password_signup)
                if success:
                    st.success(msg)
                else:
                    st.error(msg)
            else:
                st.warning("Please fill all fields.")

    st.stop()  # stop execution here if not logged in

# ======================================
# Main AgriVoice App (After Login)
# ======================================
st.sidebar.success(f"Logged in as: {st.session_state.user_name}")
if st.sidebar.button("ðŸšª Logout"):
    st.session_state.authenticated = False
    st.session_state.user_name = None
    st.rerun()

st.title(f"ðŸŒ¿ AgriVoice Disease Detector - Welcome {st.session_state.user_name}! ðŸ‘‹")

# ===============================
# Load Model
# ===============================
MODEL_PATH = os.path.join(os.path.dirname(__file__), 'model', 'final_model.keras')
model = tf.keras.models.load_model(MODEL_PATH, compile=False)

labels = [
    'Apple___Apple_scab',
    'Apple___Black_rot',
    'Apple___Cedar_apple_rust',
    'Apple___healthy',
    'Blueberry___healthy',
    'Cherry_(including_sour)___Powdery_mildew',
    'Cherry_(including_sour)___healthy',
    'Corn_(maize)___Cercospora_leaf_spot Gray_leaf_spot',
    'Corn_(maize)___Common_rust_',
    'Corn_(maize)___Northern_Leaf_Blight',
    'Corn_(maize)___healthy',
    'Grape___Black_rot',
    'Grape___Esca_(Black_Measles)',
    'Grape___Leaf_blight_(Isariopsis_Leaf_Spot)',
    'Grape___healthy',
    'Orange___Haunglongbing_(Citrus_greening)',
    'Peach___Bacterial_spot',
    'Peach___healthy',
    'Pepper,_bell___Bacterial_spot',
    'Pepper,_bell___healthy',
    'Potato___Early_blight',
    'Potato___Late_blight',
    'Potato___healthy',
    'Raspberry___healthy',
    'Soybean___healthy',
    'Squash___Powdery_mildew',
    'Strawberry___Leaf_scorch',
    'Strawberry___healthy',
    'Tomato___Bacterial_spot',
    'Tomato___Early_blight',
    'Tomato___Late_blight',
    'Tomato___Leaf_Mold',
    'Tomato___Septoria_leaf_spot',
    'Tomato___Spider_mites Two-spotted_spider_mite',
    'Tomato___Target_Spot',
    'Tomato___Tomato_Yellow_Leaf_Curl_Virus',
    'Tomato___Tomato_mosaic_virus',
    'Tomato___healthy'
]

# ===============================
# Language Configuration
# ===============================
LANG_OPTIONS = {
    "English": "en-IN",
    "Hindi (à¤¹à¤¿à¤¨à¥à¤¦à¥€)": "hi-IN",
    "Marathi (à¤®à¤°à¤¾à¤ à¥€)": "mr-IN",
    "Tamil (à®¤à®®à®¿à®´à¯)": "ta-IN",
    "Telugu (à°¤à±†à°²à±à°—à±)": "te-IN",
    "Bengali (à¦¬à¦¾à¦‚à¦²à¦¾)": "bn-IN",
    "Gujarati (àª—à«àªœàª°àª¾àª¤à«€)": "gu-IN",
    "Odia (à¬“à¬¡à¬¼à¬¿à¬†)": "or-IN",
    "Punjabi (à¨ªà©°à¨œà¨¾à¨¬à©€)": "pa-IN",
    "Urdu (Ø§Ø±Ø¯Ùˆ)": "ur-IN",
    "Malayalam (à´®à´²à´¯à´¾à´³à´‚)": "ml-IN",
    "Kannada (à²•à²¨à³à²¨à²¡)": "kn-IN",
}

st.sidebar.markdown("## ðŸŒ Select Your Language")
selected_language = st.sidebar.selectbox("Choose a language", list(LANG_OPTIONS.keys()))
language_code = LANG_OPTIONS[selected_language]

# ===============================
# Language Translations for UI
# ===============================
TRANSLATIONS = {
    "English": {
        "upload_disease_header": "ðŸ§ª Upload a fruit/leaf image to detect disease",
        "choose_image": "Choose an image...",
        "analyzing": "ðŸ” Analyzing your plant image...",
        "prediction": "âœ… Prediction: ",
        "chatbot_title": "ðŸ’¬ AgriVoice Chatbot",
        "open_chatbot": "Open Chatbot",
        "chatbot_header": "ðŸ¤– Chatbot Assistant",
        "image_options": "ðŸ–¼ï¸ Optional: Use Image for Analysis",
        "use_detection_image": "ðŸ“¤ Use Disease Detection Image",
        "upload_new_image": "âž• Upload New Image",
        "using_detection_image": "Using Disease Detection Image",
        "using_detection_success": "âœ… Using disease detection image!",
        "no_detection_image": "âš ï¸ No image from disease detection. Please upload an image above first.",
        "upload_chatbot_image": "Choose an image to discuss with the chatbot (optional)...",
        "image_loaded": "âœ… Image loaded! You can now ask questions about this image.",
        "clear_image": "Clear This Image",
        "type_message": "Type your message:",
        "voice_mode": "ðŸŽ™ï¸ Voice Chat Mode:",
        "start_recording": "ðŸŽ¤ Start Recording",
        "stop_recording": "ðŸŸ¥ Stop Recording",
        "recording_status": "Recording... Speak now! ðŸ”´",
        "mic_hint": "*(Click mic to start recording)*",
        "recording_stopped": "ðŸŽ¤ Recording stopped. Processing...",
        "you_said": "âœ… You said",
        "could_not_understand": "âš ï¸ Could not understand your voice.",
        "speech_error": "âŒ Speech service error: ",
        "could_not_generate_speech": "ðŸ”‡ Could not generate speech: ",
        "error": "Error: ",
    },
    "Hindi (à¤¹à¤¿à¤¨à¥à¤¦à¥€)": {
        "upload_disease_header": "ðŸ§ª à¤¬à¥€à¤®à¤¾à¤°à¥€ à¤•à¤¾ à¤ªà¤¤à¤¾ à¤²à¤—à¤¾à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤«à¤²/à¤ªà¤¤à¥à¤¤à¥€ à¤•à¥€ à¤›à¤µà¤¿ à¤…à¤ªà¤²à¥‹à¤¡ à¤•à¤°à¥‡à¤‚",
        "choose_image": "à¤à¤• à¤›à¤µà¤¿ à¤šà¥à¤¨à¥‡à¤‚...",
        "analyzing": "ðŸ” à¤†à¤ªà¤•à¥€ à¤ªà¥Œà¤§à¥‡ à¤•à¥€ à¤›à¤µà¤¿ à¤•à¤¾ à¤µà¤¿à¤¶à¥à¤²à¥‡à¤·à¤£ à¤•à¤¿à¤¯à¤¾ à¤œà¤¾ à¤°à¤¹à¤¾ à¤¹à¥ˆ...",
        "prediction": "âœ… à¤­à¤µà¤¿à¤·à¥à¤¯à¤µà¤¾à¤£à¥€: ",
        "chatbot_title": "ðŸ’¬ AgriVoice à¤šà¥ˆà¤Ÿà¤¬à¥‰à¤Ÿ",
        "open_chatbot": "à¤šà¥ˆà¤Ÿà¤¬à¥‰à¤Ÿ à¤–à¥‹à¤²à¥‡à¤‚",
        "chatbot_header": "ðŸ¤– à¤šà¥ˆà¤Ÿà¤¬à¥‰à¤Ÿ à¤¸à¤¹à¤¾à¤¯à¤•",
        "image_options": "ðŸ–¼ï¸ à¤µà¥ˆà¤•à¤²à¥à¤ªà¤¿à¤•: à¤µà¤¿à¤¶à¥à¤²à¥‡à¤·à¤£ à¤•à¥‡ à¤²à¤¿à¤ à¤›à¤µà¤¿ à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¥‡à¤‚",
        "use_detection_image": "ðŸ“¤ à¤°à¥‹à¤— à¤ªà¤¹à¤šà¤¾à¤¨ à¤›à¤µà¤¿ à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¥‡à¤‚",
        "upload_new_image": "âž• à¤¨à¤ˆ à¤›à¤µà¤¿ à¤…à¤ªà¤²à¥‹à¤¡ à¤•à¤°à¥‡à¤‚",
        "using_detection_image": "à¤°à¥‹à¤— à¤ªà¤¹à¤šà¤¾à¤¨ à¤›à¤µà¤¿ à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤° à¤°à¤¹à¥‡ à¤¹à¥ˆà¤‚",
        "using_detection_success": "âœ… à¤°à¥‹à¤— à¤ªà¤¹à¤šà¤¾à¤¨ à¤›à¤µà¤¿ à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤¿à¤¯à¤¾ à¤œà¤¾ à¤°à¤¹à¤¾ à¤¹à¥ˆ!",
        "no_detection_image": "âš ï¸ à¤°à¥‹à¤— à¤ªà¤¹à¤šà¤¾à¤¨ à¤¸à¥‡ à¤•à¥‹à¤ˆ à¤›à¤µà¤¿ à¤¨à¤¹à¥€à¤‚à¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤ªà¤¹à¤²à¥‡ à¤Šà¤ªà¤° à¤à¤• à¤›à¤µà¤¿ à¤…à¤ªà¤²à¥‹à¤¡ à¤•à¤°à¥‡à¤‚à¥¤",
        "upload_chatbot_image": "à¤šà¥ˆà¤Ÿà¤¬à¥‰à¤Ÿ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤šà¤°à¥à¤šà¤¾ à¤•à¥‡ à¤²à¤¿à¤ à¤à¤• à¤›à¤µà¤¿ à¤šà¥à¤¨à¥‡à¤‚ (à¤µà¥ˆà¤•à¤²à¥à¤ªà¤¿à¤•)...",
        "image_loaded": "âœ… à¤›à¤µà¤¿ à¤²à¥‹à¤¡ à¤¹à¥‹ à¤—à¤ˆ! à¤…à¤¬ à¤†à¤ª à¤‡à¤¸ à¤›à¤µà¤¿ à¤•à¥‡ à¤¬à¤¾à¤°à¥‡ à¤®à¥‡à¤‚ à¤¸à¤µà¤¾à¤² à¤ªà¥‚à¤› à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤",
        "clear_image": "à¤‡à¤¸ à¤›à¤µà¤¿ à¤•à¥‹ à¤¸à¤¾à¤«à¤¼ à¤•à¤°à¥‡à¤‚",
        "type_message": "à¤…à¤ªà¤¨à¤¾ à¤¸à¤‚à¤¦à¥‡à¤¶ à¤Ÿà¤¾à¤‡à¤ª à¤•à¤°à¥‡à¤‚:",
        "voice_mode": "ðŸŽ™ï¸ à¤µà¥‰à¤¯à¤¸ à¤šà¥ˆà¤Ÿ à¤®à¥‹à¤¡:",
        "start_recording": "ðŸŽ¤ à¤°à¤¿à¤•à¥‰à¤°à¥à¤¡à¤¿à¤‚à¤— à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡à¤‚",
        "stop_recording": "ðŸŸ¥ à¤°à¤¿à¤•à¥‰à¤°à¥à¤¡à¤¿à¤‚à¤— à¤¬à¤‚à¤¦ à¤•à¤°à¥‡à¤‚",
        "recording_status": "à¤°à¤¿à¤•à¥‰à¤°à¥à¤¡à¤¿à¤‚à¤—... à¤…à¤­à¥€ à¤¬à¥‹à¤²à¥‡à¤‚! ðŸ”´",
        "mic_hint": "*(à¤°à¤¿à¤•à¥‰à¤°à¥à¤¡à¤¿à¤‚à¤— à¤¶à¥à¤°à¥‚ à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤®à¤¾à¤‡à¤• à¤ªà¤° à¤•à¥à¤²à¤¿à¤• à¤•à¤°à¥‡à¤‚)*",
        "recording_stopped": "ðŸŽ¤ à¤°à¤¿à¤•à¥‰à¤°à¥à¤¡à¤¿à¤‚à¤— à¤¬à¤‚à¤¦ à¤•à¥€ à¤—à¤ˆà¥¤ à¤ªà¥à¤°à¤¸à¤‚à¤¸à¥à¤•à¤°à¤£...",
        "you_said": "âœ… à¤†à¤ªà¤¨à¥‡ à¤•à¤¹à¤¾",
        "could_not_understand": "âš ï¸ à¤†à¤ªà¤•à¥€ à¤†à¤µà¤¾à¤œà¤¼ à¤¸à¤®à¤ à¤¨à¤¹à¥€à¤‚ à¤†à¤ˆà¥¤",
        "speech_error": "âŒ à¤­à¤¾à¤·à¤£ à¤¸à¥‡à¤µà¤¾ à¤¤à¥à¤°à¥à¤Ÿà¤¿: ",
        "could_not_generate_speech": "ðŸ”‡ à¤­à¤¾à¤·à¤£ à¤‰à¤¤à¥à¤ªà¤¨à¥à¤¨ à¤¨à¤¹à¥€à¤‚ à¤•à¤° à¤¸à¤•à¥‡: ",
        "error": "à¤¤à¥à¤°à¥à¤Ÿà¤¿: ",
    },
    "Marathi (à¤®à¤°à¤¾à¤ à¥€)": {
        "upload_disease_header": "ðŸ§ª à¤°à¥‹à¤— à¤¶à¥‹à¤§à¤£à¥à¤¯à¤¾à¤¸à¤¾à¤ à¥€ à¤«à¤³/à¤ªà¤¾à¤¨ à¤šà¤¿à¤¤à¥à¤° à¤…à¤ªà¤²à¥‹à¤¡ à¤•à¤°à¤¾",
        "choose_image": "à¤à¤• à¤šà¤¿à¤¤à¥à¤° à¤¨à¤¿à¤µà¤¡à¤¾...",
        "analyzing": "ðŸ” à¤†à¤ªà¤²à¥à¤¯à¤¾ à¤µà¤¨à¤¸à¥à¤ªà¤¤à¥€à¤šà¤¾ à¤šà¤¿à¤¤à¥à¤° à¤µà¤¿à¤¶à¥à¤²à¥‡à¤·à¤£ à¤•à¥‡à¤²à¤¾ à¤œà¤¾à¤¤ à¤†à¤¹à¥‡...",
        "prediction": "âœ… à¤­à¤µà¤¿à¤·à¥à¤¯à¤µà¤¾à¤£à¥€: ",
        "chatbot_title": "ðŸ’¬ AgriVoice à¤šà¥…à¤Ÿà¤¬à¥‰à¤Ÿ",
        "open_chatbot": "à¤šà¥…à¤Ÿà¤¬à¥‰à¤Ÿ à¤‰à¤˜à¤¡à¤¾",
        "chatbot_header": "ðŸ¤– à¤šà¥…à¤Ÿà¤¬à¥‰à¤Ÿ à¤¸à¤¹à¤¾à¤¯à¤•",
        "image_options": "ðŸ–¼ï¸ à¤µà¥ˆà¤•à¤²à¥à¤ªà¤¿à¤•: à¤µà¤¿à¤¶à¥à¤²à¥‡à¤·à¤£à¤¾à¤¸à¤¾à¤ à¥€ à¤šà¤¿à¤¤à¥à¤° à¤µà¤¾à¤ªà¤°à¤¾",
        "use_detection_image": "ðŸ“¤ à¤°à¥‹à¤— à¤¶à¥‹à¤§à¤£ à¤šà¤¿à¤¤à¥à¤° à¤µà¤¾à¤ªà¤°à¤¾",
        "upload_new_image": "âž• à¤¨à¤µà¥€à¤¨ à¤šà¤¿à¤¤à¥à¤° à¤…à¤ªà¤²à¥‹à¤¡ à¤•à¤°à¤¾",
        "using_detection_image": "à¤°à¥‹à¤— à¤¶à¥‹à¤§à¤£ à¤šà¤¿à¤¤à¥à¤° à¤µà¤¾à¤ªà¤°à¤¤ à¤†à¤¹à¥‡",
        "using_detection_success": "âœ… à¤°à¥‹à¤— à¤¶à¥‹à¤§à¤£ à¤šà¤¿à¤¤à¥à¤° à¤µà¤¾à¤ªà¤°à¤²à¤¾ à¤œà¤¾à¤¤ à¤†à¤¹à¥‡!",
        "no_detection_image": "âš ï¸ à¤°à¥‹à¤— à¤¶à¥‹à¤§à¤£à¥€à¤®à¤§à¥‚à¤¨ à¤•à¥‹à¤£à¤¤à¥‡à¤¹à¥€ à¤šà¤¿à¤¤à¥à¤° à¤¨à¤¾à¤¹à¥€. à¤•à¥ƒà¤ªà¤¯à¤¾ à¤µà¤°à¥€à¤² à¤ªà¥à¤°à¤¥à¤® à¤šà¤¿à¤¤à¥à¤° à¤…à¤ªà¤²à¥‹à¤¡ à¤•à¤°à¤¾.",
        "upload_chatbot_image": "à¤šà¥…à¤Ÿà¤¬à¥‰à¤Ÿà¤¸à¤¹ à¤šà¤°à¥à¤šà¤¾ à¤•à¤°à¤£à¥à¤¯à¤¾à¤¸à¤¾à¤ à¥€ à¤à¤• à¤šà¤¿à¤¤à¥à¤° à¤¨à¤¿à¤µà¤¡à¤¾ (à¤µà¥ˆà¤•à¤²à¥à¤ªà¤¿à¤•)...",
        "image_loaded": "âœ… à¤šà¤¿à¤¤à¥à¤° à¤²à¥‹à¤¡ à¤à¤¾à¤²à¥‡! à¤†à¤¤à¤¾ à¤†à¤ª à¤¯à¤¾ à¤šà¤¿à¤¤à¥à¤°à¤¾à¤µà¤° à¤ªà¥à¤°à¤¶à¥à¤¨ à¤µà¤¿à¤šà¤¾à¤°à¥‚ à¤¶à¤•à¤¤à¤¾.",
        "clear_image": "à¤¹à¥‡ à¤šà¤¿à¤¤à¥à¤° à¤¸à¤¾à¤« à¤•à¤°à¤¾",
        "type_message": "à¤†à¤ªà¤²à¤¾ à¤¸à¤‚à¤¦à¥‡à¤¶ à¤Ÿà¤¾à¤‡à¤ª à¤•à¤°à¤¾:",
        "voice_mode": "ðŸŽ™ï¸ à¤µà¥à¤¹à¥‰à¤‡à¤¸ à¤šà¥…à¤Ÿ à¤®à¥‹à¤¡:",
        "start_recording": "ðŸŽ¤ à¤°à¥‡à¤•à¥‰à¤°à¥à¤¡à¤¿à¤‚à¤— à¤¸à¥à¤°à¥‚ à¤•à¤°à¤¾",
        "stop_recording": "ðŸŸ¥ à¤°à¥‡à¤•à¥‰à¤°à¥à¤¡à¤¿à¤‚à¤— à¤¬à¤‚à¤¦ à¤•à¤°à¤¾",
        "recording_status": "à¤°à¥‡à¤•à¥‰à¤°à¥à¤¡à¤¿à¤‚à¤—... à¤†à¤¤à¤¾ à¤¬à¥‹à¤²à¤¾! ðŸ”´",
        "mic_hint": "*(à¤°à¥‡à¤•à¥‰à¤°à¥à¤¡à¤¿à¤‚à¤— à¤¸à¥à¤°à¥‚ à¤•à¤°à¤£à¥à¤¯à¤¾à¤¸à¤¾à¤ à¥€ à¤®à¤¾à¤¯à¤• à¤µà¤° à¤•à¥à¤²à¤¿à¤• à¤•à¤°à¤¾)*",
        "recording_stopped": "ðŸŽ¤ à¤°à¥‡à¤•à¥‰à¤°à¥à¤¡à¤¿à¤‚à¤— à¤¬à¤‚à¤¦ à¤•à¥‡à¤²à¥€. à¤ªà¥à¤°à¤•à¥à¤°à¤¿à¤¯à¤¾...",
        "you_said": "âœ… à¤†à¤ªà¤£ à¤®à¥à¤¹à¤£à¤¾à¤²à¥‡",
        "could_not_understand": "âš ï¸ à¤†à¤ªà¤²à¥€ à¤†à¤µà¤¾à¤œ à¤¸à¤®à¤œà¤²à¥€ à¤¨à¤¾à¤¹à¥€.",
        "speech_error": "âŒ à¤­à¤¾à¤·à¤£ à¤¸à¥‡à¤µà¤¾ à¤¤à¥à¤°à¥à¤Ÿà¤¿: ",
        "could_not_generate_speech": "ðŸ”‡ à¤­à¤¾à¤·à¤£ à¤µà¥à¤¯à¥à¤¤à¥à¤ªà¤¨à¥à¤¨ à¤•à¤°à¥‚ à¤¶à¤•à¤¤ à¤¨à¤¾à¤¹à¥€: ",
        "error": "à¤¤à¥à¤°à¥à¤Ÿà¤¿: ",
    },
    "Tamil (à®¤à®®à®¿à®´à¯)": {
        "upload_disease_header": "ðŸ§ª à®¨à¯‹à®¯à¯ à®•à®£à¯à®Ÿà®±à®¿à®¯ à®ªà®´à®®à¯/à®‡à®²à¯ˆà®¯à®¿à®©à¯ à®ªà®Ÿà®¤à¯à®¤à¯ˆ à®ªà®¤à®¿à®µà¯‡à®±à¯à®±à®µà¯à®®à¯",
        "choose_image": "à®’à®°à¯ à®ªà®Ÿà®¤à¯à®¤à¯ˆà®¤à¯ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯...",
        "analyzing": "ðŸ” à®‰à®™à¯à®•à®³à¯ à®¤à®¾à®µà®°à®¤à¯à®¤à®¿à®©à¯ à®ªà®Ÿà®®à¯ à®ªà®•à¯à®ªà¯à®ªà®¾à®¯à¯à®µà¯ à®šà¯†à®¯à¯à®¯à®ªà¯à®ªà®Ÿà¯à®•à®¿à®±à®¤à¯...",
        "prediction": "âœ… à®•à®£à®¿à®ªà¯à®ªà¯: ",
        "chatbot_title": "ðŸ’¬ AgriVoice à®šà®¾à®Ÿà¯à®ªà¯‹à®Ÿà¯",
        "open_chatbot": "à®šà®¾à®Ÿà¯à®ªà¯‹à®Ÿà¯ à®¤à®¿à®±à®•à¯à®•à®µà¯à®®à¯",
        "chatbot_header": "ðŸ¤– à®šà®¾à®Ÿà¯à®ªà¯‹à®Ÿà¯ à®‰à®¤à®µà®¿à®¯à®¾à®³à®°à¯",
        "image_options": "ðŸ–¼ï¸ à®µà®¿à®°à¯à®ªà¯à®ªà®®à®¾à®•: à®ªà®•à¯à®ªà¯à®ªà®¾à®¯à¯à®µà¯à®•à¯à®•à¯ à®ªà®Ÿà®¤à¯à®¤à¯ˆà®ªà¯ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à®µà¯à®®à¯",
        "use_detection_image": "ðŸ“¤ à®¨à¯‹à®¯à¯ à®•à®£à¯à®Ÿà®±à®¿à®¤à®²à¯ à®ªà®Ÿà®¤à¯à®¤à¯ˆà®ªà¯ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à®µà¯à®®à¯",
        "upload_new_image": "âž• à®ªà¯à®¤à®¿à®¯ à®ªà®Ÿà®¤à¯à®¤à¯ˆà®ªà¯ à®ªà®¤à®¿à®µà¯‡à®±à¯à®±à®µà¯à®®à¯",
        "using_detection_image": "à®¨à¯‹à®¯à¯ à®•à®£à¯à®Ÿà®±à®¿à®¤à®²à¯ à®ªà®Ÿà®¤à¯à®¤à¯ˆà®ªà¯ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à¯à®•à®¿à®±à®¤à¯",
        "using_detection_success": "âœ… à®¨à¯‹à®¯à¯ à®•à®£à¯à®Ÿà®±à®¿à®¤à®²à¯ à®ªà®Ÿà®¤à¯à®¤à¯ˆà®ªà¯ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à¯à®•à®¿à®±à®¤à¯!",
        "no_detection_image": "âš ï¸ à®¨à¯‹à®¯à¯ à®•à®£à¯à®Ÿà®±à®¿à®¤à®²à¯ à®‡à®²à¯à®²à¯ˆ. à®®à¯‡à®²à¯‡ à®’à®°à¯ à®ªà®Ÿà®¤à¯à®¤à¯ˆà®ªà¯ à®ªà®¤à®¿à®µà¯‡à®±à¯à®±à®µà¯à®®à¯.",
        "upload_chatbot_image": "à®šà®¾à®Ÿà¯à®ªà¯‹à®Ÿà¯à®Ÿà¯à®Ÿà®©à¯ à®µà®¿à®µà®¾à®¤à®¿à®•à¯à®• à®’à®°à¯ à®ªà®Ÿà®¤à¯à®¤à¯ˆà®¤à¯ à®¤à¯‡à®°à¯à®¨à¯à®¤à¯†à®Ÿà¯à®•à¯à®•à®µà¯à®®à¯ (à®µà®¿à®°à¯à®ªà¯à®ªà®®à®¾à®•)...",
        "image_loaded": "âœ… à®ªà®Ÿà®®à¯ à®à®±à¯à®±à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯! à®‡à®¨à¯à®¤ à®ªà®Ÿà®¤à¯à®¤à¯ˆà®ªà¯ à®ªà®±à¯à®±à®¿ à®•à¯‡à®³à¯à®µà®¿à®•à®³à¯ˆà®•à¯ à®•à¯‡à®Ÿà¯à®•à®²à®¾à®®à¯.",
        "clear_image": "à®‡à®¨à¯à®¤ à®ªà®Ÿà®¤à¯à®¤à¯ˆà®¤à¯ à®¤à¯†à®³à®¿à®µà¯à®šà¯†à®¯à¯à®¯à®µà¯à®®à¯",
        "type_message": "à®‰à®™à¯à®•à®³à¯ à®šà¯†à®¯à¯à®¤à®¿à®¯à¯ˆ à®µà®•à¯ˆ:",
        "voice_mode": "ðŸŽ™ï¸ à®•à¯à®°à®²à¯ à®šà®¾à®Ÿà¯ à®ªà®¯à®©à¯à®®à¯à®±à¯ˆ:",
        "start_recording": "ðŸŽ¤ à®ªà®¤à®¿à®µà¯à®šà¯†à®¯à¯à®¯ à®¤à¯Šà®Ÿà®™à¯à®•à®µà¯à®®à¯",
        "stop_recording": "ðŸŸ¥ à®ªà®¤à®¿à®µà¯à®šà¯†à®¯à¯à®¤à®²à¯ˆ à®¨à®¿à®±à¯à®¤à¯à®¤à®µà¯à®®à¯",
        "recording_status": "à®ªà®¤à®¿à®µà¯à®šà¯†à®¯à¯à®•à®¿à®±à®¤à¯... à®‡à®ªà¯à®ªà¯‹à®¤à¯ à®ªà¯‡à®šà®µà¯à®®à¯! ðŸ”´",
        "mic_hint": "*(à®ªà®¤à®¿à®µà¯à®šà¯†à®¯à¯à®¯ à®®à¯ˆà®•à¯à®•à®¿à®²à¯ à®•à®¿à®³à®¿à®•à¯ à®šà¯†à®¯à¯à®¯à®µà¯à®®à¯)*",
        "recording_stopped": "ðŸŽ¤ à®ªà®¤à®¿à®µà¯à®šà¯†à®¯à¯à®¤à®²à¯ à®¨à®¿à®±à¯à®¤à¯à®¤à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯. à®šà¯†à®¯à®²à®¾à®•à¯à®•à®®à¯...",
        "you_said": "âœ… à®¨à¯€à®™à¯à®•à®³à¯ à®šà¯Šà®©à¯à®©à®¤à¯",
        "could_not_understand": "âš ï¸ à®‰à®™à¯à®•à®³à¯ à®•à¯à®°à®²à¯ à®ªà¯à®°à®¿à®¨à¯à®¤à¯à®•à¯Šà®³à¯à®³ à®®à¯à®Ÿà®¿à®¯à®µà®¿à®²à¯à®²à¯ˆ.",
        "speech_error": "âŒ à®ªà¯‡à®šà¯à®šà¯ à®šà¯‡à®µà¯ˆ à®ªà®¿à®´à¯ˆ: ",
        "could_not_generate_speech": "ðŸ”‡ à®ªà¯‡à®šà¯à®šà¯ à®‰à®°à¯à®µà®¾à®•à¯à®• à®®à¯à®Ÿà®¿à®¯à®µà®¿à®²à¯à®²à¯ˆ: ",
        "error": "à®ªà®¿à®´à¯ˆ: ",
    },
    "Telugu (à°¤à±†à°²à±à°—à±)": {
        "upload_disease_header": "ðŸ§ª à°µà±à°¯à°¾à°§à°¿à°¨à°¿ à°—à±à°°à±à°¤à°¿à°‚à°šà°¡à°¾à°¨à°¿à°•à°¿ à°ªà°‚à°¡à±à°²à±/à°†à°•à± à°šà°¿à°¤à±à°°à°‚ à°…à°ªà±â€Œà°²à±‹à°¡à± à°šà±‡à°¯à°‚à°¡à°¿",
        "choose_image": "à°’à°• à°šà°¿à°¤à±à°°à°‚ à°Žà°‚à°šà±à°•à±‹à°‚à°¡à°¿...",
        "analyzing": "ðŸ” à°®à±€ à°®à±Šà°•à±à°• à°šà°¿à°¤à±à°°à°‚ à°µà°¿à°¶à±à°²à±‡à°·à°£ à°šà±‡à°¯à°¬à°¡à±à°¤à±à°‚à°¦à°¿...",
        "prediction": "âœ… à°…à°‚à°šà°¨à°¾: ",
        "chatbot_title": "ðŸ’¬ AgriVoice à°šà°¾à°Ÿà±â€Œà°¬à°¾à°Ÿà±",
        "open_chatbot": "à°šà°¾à°Ÿà±â€Œà°¬à°¾à°Ÿà± à°¤à±†à°°à°µà°‚à°¡à°¿",
        "chatbot_header": "ðŸ¤– à°šà°¾à°Ÿà±â€Œà°¬à°¾à°Ÿà± à°¸à¦¹à°¾à°¯à°•",
        "image_options": "ðŸ–¼ï¸ à°à°šà±à°›à°¿à°•à°‚: à°µà°¿à°¶à±à°²à±‡à°·à°£ à°•à±‹à°¸à°‚ à°šà°¿à°¤à±à°°à°¾à°¨à±à°¨à°¿ à°‰à°ªà°¯à±‹à°—à°¿à°‚à°šà°‚à°¡à°¿",
        "use_detection_image": "ðŸ“¤ à°µà±à°¯à°¾à°§à°¿ à°—à±à°°à±à°¤à°¿à°‚à°ªà± à°šà°¿à°¤à±à°°à°¾à°¨à±à°¨à°¿ à°‰à°ªà°¯à±‹à°—à°¿à°‚à°šà°‚à°¡à°¿",
        "upload_new_image": "âž• à°•à±Šà°¤à±à°¤ à°šà°¿à°¤à±à°°à°‚ à°…à°ªà±â€Œà°²à±‹à°¡à± à°šà±‡à°¯à°‚à°¡à°¿",
        "using_detection_image": "à°µà±à°¯à°¾à°§à°¿ à°—à±à°°à±à°¤à°¿à°‚à°ªà± à°šà°¿à°¤à±à°°à°¾à°¨à±à°¨à°¿ à°‰à°ªà°¯à±‹à°—à°¿à°¸à±à°¤à±à°‚à°¦à°¿",
        "using_detection_success": "âœ… à°µà±à°¯à°¾à°§à°¿ à°—à±à°°à±à°¤à°¿à°‚à°ªà± à°šà°¿à°¤à±à°°à°‚ à°‰à°ªà°¯à±‹à°—à°¿à°‚à°šà°¬à°¡à±à°¤à±à°‚à°¦à°¿!",
        "no_detection_image": "âš ï¸ à°µà±à°¯à°¾à°§à°¿ à°—à±à°°à±à°¤à°¿à°‚à°ªà± à°¨à±à°‚à°¡à°¿ à°šà°¿à°¤à±à°°à°‚ à°²à±‡à°¦à±. à°¦à°¯à°šà±‡à°¸à°¿ à°Žà°—à±à°µ à°šà°¿à°¤à±à°°à°¾à°¨à±à°¨à°¿ à°…à°ªà±â€Œà°²à±‹à°¡à± à°šà±‡à°¯à°‚à°¡à°¿.",
        "upload_chatbot_image": "à°šà°¾à°Ÿà±â€Œà°¬à°¾à°Ÿà±â€Œà°¤à±‹ à°šà°°à±à°šà°¿à°‚à°šà°Ÿà°¾à°¨à°¿à°•à°¿ à°šà°¿à°¤à±à°°à°‚ à°Žà°‚à°šà±à°•à±‹à°‚à°¡à°¿ (à°à°šà±à°›à°¿à°•à°‚)...",
        "image_loaded": "âœ… à°šà°¿à°¤à±à°°à°‚ à°²à±‹à°¡à± à°šà±‡à°¯à°¬à°¡à°¿à°‚à°¦à°¿! à°ˆ à°šà°¿à°¤à±à°°à°‚ à°—à±à°°à°¿à°‚à°šà°¿ à°ªà±à°°à°¶à±à°¨à°²à± à°…à°¡à°—à°µà°šà±à°šà±.",
        "clear_image": "à°ˆ à°šà°¿à°¤à±à°°à°¾à°¨à±à°¨à°¿ à°•à±à°²à°¿à°¯à°°à± à°šà±‡à°¯à°‚à°¡à°¿",
        "type_message": "à°®à±€ à°¸à°‚à°¦à±‡à°¶à°‚ à°Ÿà±ˆà°ªà± à°šà±‡à°¯à°‚à°¡à°¿:",
        "voice_mode": "ðŸŽ™ï¸ à°µà°¾à°¯à°¿à°¸à± à°šà°¾à°Ÿà± à°®à±‹à°¡à±:",
        "start_recording": "ðŸŽ¤ à°°à°¿à°•à°¾à°°à±à°¡à°¿à°‚à°—à± à°ªà±à°°à°¾à°°à°‚à°­à°¿à°‚à°šà°‚à°¡à°¿",
        "stop_recording": "ðŸŸ¥ à°°à°¿à°•à°¾à°°à±à°¡à°¿à°‚à°—à± à°†à°ªà°‚à°¡à°¿",
        "recording_status": "à°°à°¿à°•à°¾à°°à±à°¡à°¿à°‚à°—à±... à°‡à°ªà±à°ªà±à°¡à± à°®à°¾à°Ÿà±à°²à°¾à°¡à°‚à°¡à°¿! ðŸ”´",
        "mic_hint": "*(à°°à°¿à°•à°¾à°°à±à°¡à°¿à°‚à°—à± à°ªà±à°°à°¾à°°à°‚à°­à°¿à°‚à°šà°¡à°¾à°¨à°¿à°•à°¿ à°®à±ˆà°•à±â€Œà°ªà±ˆ à°•à±à°²à°¿à°•à± à°šà±‡à°¯à°‚à°¡à°¿)*",
        "recording_stopped": "ðŸŽ¤ à°°à°¿à°•à°¾à°°à±à°¡à°¿à°‚à°—à± à°†à°ªà°¿à°µà±‡à°¯à°¬à°¡à°¿à°‚à°¦à°¿. à°ªà±à°°à°¾à°¸à±†à°¸à°¿à°‚à°—à±...",
        "you_said": "âœ… à°®à±€à°°à± à°šà±†à°ªà±à°ªà°¾à°°à±",
        "could_not_understand": "âš ï¸ à°®à±€ à°µà°¾à°¯à°¿à°¸à± à°…à°°à±à°¥à°‚ à°•à°¾à°²à±‡à°¦à±.",
        "speech_error": "âŒ à°¸à±à°ªà±€à°šà± à°¸à°°à±à°µà°¿à°¸à± à°Žà°°à±à°°à°°à±: ",
        "could_not_generate_speech": "ðŸ”‡ à°¸à±à°ªà±€à°šà± à°œà°¨à°°à±‡à°Ÿà± à°šà±‡à°¯à°²à±‡à°®à±: ",
        "error": "à°Žà°°à±à°°à°°à±: ",
    },
    "Bengali (à¦¬à¦¾à¦‚à¦²à¦¾)": {
        "upload_disease_header": "ðŸ§ª à¦°à§‹à¦— à¦¸à¦¨à¦¾à¦•à§à¦¤ à¦•à¦°à¦¤à§‡ à¦«à¦²/à¦ªà¦¾à¦¤à¦¾à¦° à¦›à¦¬à¦¿ à¦†à¦ªà¦²à§‹à¦¡ à¦•à¦°à§à¦¨",
        "choose_image": "à¦à¦•à¦Ÿà¦¿ à¦›à¦¬à¦¿ à¦šà¦¯à¦¼à¦¨ à¦•à¦°à§à¦¨...",
        "analyzing": "ðŸ” à¦†à¦ªà¦¨à¦¾à¦° à¦‰à¦¦à§à¦­à¦¿à¦¦à§‡à¦° à¦›à¦¬à¦¿ à¦¬à¦¿à¦¶à§à¦²à§‡à¦·à¦£ à¦•à¦°à¦¾ à¦¹à¦šà§à¦›à§‡...",
        "prediction": "âœ… à¦ªà§‚à¦°à§à¦¬à¦¾à¦­à¦¾à¦¸: ",
        "chatbot_title": "ðŸ’¬ AgriVoice à¦šà§à¦¯à¦¾à¦Ÿà¦¬à¦Ÿ",
        "open_chatbot": "à¦šà§à¦¯à¦¾à¦Ÿà¦¬à¦Ÿ à¦–à§à¦²à§à¦¨",
        "chatbot_header": "ðŸ¤– à¦šà§à¦¯à¦¾à¦Ÿà¦¬à¦Ÿ à¦¸à¦¹à¦¾à¦¯à¦¼à¦•",
        "image_options": "ðŸ–¼ï¸ à¦à¦šà§à¦›à¦¿à¦•: à¦¬à¦¿à¦¶à§à¦²à§‡à¦·à¦£à§‡à¦° à¦œà¦¨à§à¦¯ à¦šà¦¿à¦¤à§à¦° à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à§à¦¨",
        "use_detection_image": "ðŸ“¤ à¦°à§‹à¦— à¦¸à¦¨à¦¾à¦•à§à¦¤à¦•à¦°à¦£ à¦šà¦¿à¦¤à§à¦° à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à§à¦¨",
        "upload_new_image": "âž• à¦¨à¦¤à§à¦¨ à¦šà¦¿à¦¤à§à¦° à¦†à¦ªà¦²à§‹à¦¡ à¦•à¦°à§à¦¨",
        "using_detection_image": "à¦°à§‹à¦— à¦¸à¦¨à¦¾à¦•à§à¦¤à¦•à¦°à¦£ à¦šà¦¿à¦¤à§à¦° à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à¦›à§‡à¦¨",
        "using_detection_success": "âœ… à¦°à§‹à¦— à¦¸à¦¨à¦¾à¦•à§à¦¤à¦•à¦°à¦£ à¦šà¦¿à¦¤à§à¦° à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à¦¾ à¦¹à¦šà§à¦›à§‡!",
        "no_detection_image": "âš ï¸ à¦°à§‹à¦— à¦¸à¦¨à¦¾à¦•à§à¦¤à¦•à¦°à¦£ à¦¥à§‡à¦•à§‡ à¦•à§‹à¦¨à§‹ à¦šà¦¿à¦¤à§à¦° à¦¨à§‡à¦‡à¥¤ à¦…à¦¨à§à¦—à§à¦°à¦¹ à¦•à¦°à§‡ à¦‰à¦ªà¦°à§‡ à¦à¦•à¦Ÿà¦¿ à¦šà¦¿à¦¤à§à¦° à¦†à¦ªà¦²à§‹à¦¡ à¦•à¦°à§à¦¨à¥¤",
        "upload_chatbot_image": "à¦šà§à¦¯à¦¾à¦Ÿà¦¬à¦Ÿà§‡à¦° à¦¸à¦¾à¦¥à§‡ à¦†à¦²à§‹à¦šà¦¨à¦¾ à¦•à¦°à¦¤à§‡ à¦à¦•à¦Ÿà¦¿ à¦šà¦¿à¦¤à§à¦° à¦šà¦¯à¦¼à¦¨ à¦•à¦°à§à¦¨ (à¦à¦šà§à¦›à¦¿à¦•)...",
        "image_loaded": "âœ… à¦šà¦¿à¦¤à§à¦° à¦²à§‹à¦¡ à¦¹à¦¯à¦¼à§‡à¦›à§‡! à¦à¦–à¦¨ à¦†à¦ªà¦¨à¦¿ à¦à¦‡ à¦šà¦¿à¦¤à§à¦° à¦¸à¦®à§à¦ªà¦°à§à¦•à§‡ à¦ªà§à¦°à¦¶à§à¦¨ à¦œà¦¿à¦œà§à¦žà¦¾à¦¸à¦¾ à¦•à¦°à¦¤à§‡ à¦ªà¦¾à¦°à§‡à¦¨à¥¤",
        "clear_image": "à¦à¦‡ à¦šà¦¿à¦¤à§à¦°à¦Ÿà¦¿ à¦¸à¦¾à¦« à¦•à¦°à§à¦¨",
        "type_message": "à¦†à¦ªà¦¨à¦¾à¦° à¦¬à¦¾à¦°à§à¦¤à¦¾ à¦Ÿà¦¾à¦‡à¦ª à¦•à¦°à§à¦¨:",
        "voice_mode": "ðŸŽ™ï¸ à¦­à¦¯à¦¼à§‡à¦¸ à¦šà§à¦¯à¦¾à¦Ÿ à¦®à§‹à¦¡:",
        "start_recording": "ðŸŽ¤ à¦°à§‡à¦•à¦°à§à¦¡à¦¿à¦‚ à¦¶à§à¦°à§ à¦•à¦°à§à¦¨",
        "stop_recording": "ðŸŸ¥ à¦°à§‡à¦•à¦°à§à¦¡à¦¿à¦‚ à¦¬à¦¨à§à¦§ à¦•à¦°à§à¦¨",
        "recording_status": "à¦°à§‡à¦•à¦°à§à¦¡à¦¿à¦‚... à¦à¦–à¦¨ à¦•à¦¥à¦¾ à¦¬à¦²à§à¦¨! ðŸ”´",
        "mic_hint": "*(à¦°à§‡à¦•à¦°à§à¦¡à¦¿à¦‚ à¦¶à§à¦°à§ à¦•à¦°à¦¤à§‡ à¦®à¦¾à¦‡à¦•à§‡ à¦•à§à¦²à¦¿à¦• à¦•à¦°à§à¦¨)*",
        "recording_stopped": "ðŸŽ¤ à¦°à§‡à¦•à¦°à§à¦¡à¦¿à¦‚ à¦¬à¦¨à§à¦§ à¦•à¦°à¦¾ à¦¹à¦¯à¦¼à§‡à¦›à§‡à¥¤ à¦ªà§à¦°à¦¸à§‡à¦¸à¦¿à¦‚...",
        "you_said": "âœ… à¦†à¦ªà¦¨à¦¿ à¦¬à¦²à§‡à¦›à§‡à¦¨",
        "could_not_understand": "âš ï¸ à¦†à¦ªà¦¨à¦¾à¦° à¦•à¦£à§à¦ à¦¸à§à¦¬à¦° à¦¬à§‹à¦à¦¾ à¦¯à¦¾à¦¯à¦¼à¦¨à¦¿à¥¤",
        "speech_error": "âŒ à¦¬à¦•à§à¦¤à§ƒà¦¤à¦¾ à¦¸à§‡à¦¬à¦¾ à¦¤à§à¦°à§à¦Ÿà¦¿: ",
        "could_not_generate_speech": "ðŸ”‡ à¦¬à¦•à§à¦¤à§ƒà¦¤à¦¾ à¦‰à§Žà¦ªà¦¨à§à¦¨ à¦•à¦°à¦¤à§‡ à¦ªà¦¾à¦°à§‡à¦¨à¦¿: ",
        "error": "à¦¤à§à¦°à§à¦Ÿà¦¿: ",
    },
    "Gujarati (àª—à«àªœàª°àª¾àª¤à«€)": {
        "upload_disease_header": "ðŸ§ª àª°à«‹àª— àª¶à«‹àª§àªµàª¾ àª®àª¾àªŸà«‡ àª«àª³/àªªàª¾àª¨àª¨à«‹ àªšàª¿àª¤à«àª° àª…àªªàª²à«‹àª¡ àª•àª°à«‹",
        "choose_image": "àªšàª¿àª¤à«àª° àªªàª¸àª‚àª¦ àª•àª°à«‹...",
        "analyzing": "ðŸ” àª¤àª®àª¾àª°àª¾ àªªà«àª²àª¾àª¨à«àªŸàª¨à«‹ àªšàª¿àª¤à«àª° àªµàª¿àª¶à«àª²à«‡àª·àª£ àª•àª°àªµàª¾àª®àª¾àª‚ àª†àªµà«€ àª°àª¹à«àª¯à«‹ àª›à«‡...",
        "prediction": "âœ… àª†àª—àª¾àª¹à«€: ",
        "chatbot_title": "ðŸ’¬ AgriVoice àªšà«‡àªŸàª¬à«‹àªŸ",
        "open_chatbot": "àªšà«‡àªŸàª¬à«‹àªŸ àª–à«‹àª²à«‹",
        "chatbot_header": "ðŸ¤– àªšà«‡àªŸàª¬à«‹àªŸ àª¸àª¹àª¾àª¯àª•",
        "image_options": "ðŸ–¼ï¸ àªµà«ˆàª•àª²à«àªªàª¿àª•: àªµàª¿àª¶à«àª²à«‡àª·àª£ àª®àª¾àªŸà«‡ àªšàª¿àª¤à«àª° àªµàª¾àªªàª°à«‹",
        "use_detection_image": "ðŸ“¤ àª°à«‹àª— àª¸àª‚àª¶à«‹àª§àª¨ àªšàª¿àª¤à«àª° àªµàª¾àªªàª°à«‹",
        "upload_new_image": "âž• àª¨àªµà«‹ àªšàª¿àª¤à«àª° àª…àªªàª²à«‹àª¡ àª•àª°à«‹",
        "using_detection_image": "àª°à«‹àª— àª¸àª‚àª¶à«‹àª§àª¨ àªšàª¿àª¤à«àª° àªµàª¾àªªàª°à«àª¯à«‹",
        "using_detection_success": "âœ… àª°à«‹àª— àª¸àª‚àª¶à«‹àª§àª¨ àªšàª¿àª¤à«àª° àªµàª¾àªªàª°àªµàª¾àª¯à«‹ àª›à«‡!",
        "no_detection_image": "âš ï¸ àª°à«‹àª— àª¸àª‚àª¶à«‹àª§àª¨àª®àª¾àª‚àª¥à«€ àª•à«‹àªˆ àªšàª¿àª¤à«àª° àª¨àª¥à«€. àª•à«ƒàªªàª¾ àª•àª°à«€àª¨à«‡ àª‰àªªàª° àªšàª¿àª¤à«àª° àª…àªªàª²à«‹àª¡ àª•àª°à«‹.",
        "upload_chatbot_image": "àªšà«‡àªŸàª¬à«‹àªŸ àª¸àª¾àª¥à«‡ àªšàª°à«àªšàª¾ àª•àª°àªµàª¾ àª®àª¾àªŸà«‡ àªšàª¿àª¤à«àª° àªªàª¸àª‚àª¦ àª•àª°à«‹ (àªµà«ˆàª•àª²à«àªªàª¿àª•)...",
        "image_loaded": "âœ… àªšàª¿àª¤à«àª° àª²à«‹àª¡ àª¥àª¯à«àª‚! àª¹àªµà«‡ àª¤àª®à«‡ àª† àªšàª¿àª¤à«àª° àªµàª¿àª¶à«‡ àªªà«àª°àª¶à«àª¨à«‹ àªªà«‚àª›à«€ àª¶àª•à«‹ àª›à«‹.",
        "clear_image": "àª† àªšàª¿àª¤à«àª°àª¨à«‡ àª¸àª¾àª« àª•àª°à«‹",
        "type_message": "àª¤àª®àª¾àª°à«‹ àª¸àª‚àª¦à«‡àª¶ àªŸàª¾àªˆàªª àª•àª°à«‹:",
        "voice_mode": "ðŸŽ™ï¸ àªµà«‹àªˆàª¸ àªšà«‡àªŸ àª®à«‹àª¡:",
        "start_recording": "ðŸŽ¤ àª°à«‡àª•à«‹àª°à«àª¡àª¿àª‚àª— àª¶àª°à«‚ àª•àª°à«‹",
        "stop_recording": "ðŸŸ¥ àª°à«‡àª•à«‹àª°à«àª¡àª¿àª‚àª— àª¬àª‚àª§ àª•àª°à«‹",
        "recording_status": "àª°à«‡àª•à«‹àª°à«àª¡àª¿àª‚àª—... àª¹àªµà«‡ àª¬à«‹àª²à«‹! ðŸ”´",
        "mic_hint": "*(àª°à«‡àª•à«‹àª°à«àª¡àª¿àª‚àª— àª¶àª°à«‚ àª•àª°àªµàª¾ àª®àª¾àªŸà«‡ àª®àª¾àªˆàª• àªªàª° àª•à«àª²àª¿àª• àª•àª°à«‹)*",
        "recording_stopped": "ðŸŽ¤ àª°à«‡àª•à«‹àª°à«àª¡àª¿àª‚àª— àª¬àª‚àª§ àª•àª°àªµàª¾àª®àª¾àª‚ àª†àªµà«€. àªªà«àª°à«‹àª¸à«‡àª¸àª¿àª‚àª—...",
        "you_said": "âœ… àª¤àª®à«‡ àª•àª¹à«àª¯à«àª‚",
        "could_not_understand": "âš ï¸ àª¤àª®àª¾àª°à«‹ àª…àªµàª¾àªœ àª¸àª®àªœà«àª¯à«‹ àª¨àª¥à«€.",
        "speech_error": "âŒ àªµàª¾àª£à«€ àª¸à«‡àªµàª¾ àª­à«‚àª²: ",
        "could_not_generate_speech": "ðŸ”‡ àªµàª¾àª£à«€ àªœàª¨àª°à«‡àªŸ àª•àª°à«€ àª¶àª•à«àª¯àª¾ àª¨àª¥à«€: ",
        "error": "àª­à«‚àª²: ",
    },
    "Odia (à¬“à¬¡à¬¼à¬¿à¬†)": {
        "upload_disease_header": "ðŸ§ª à¬°à­‹à¬— à¬šà¬¿à¬¹à­à¬¨à¬Ÿ à¬ªà¬¾à¬‡à¬ à¬«à¬³/à¬ªà¬¤à­à¬° à¬šà¬¿à¬¤à­à¬° à¬…à¬ªà¬²à­‹à¬¡à­ à¬•à¬°à¬¨à­à¬¤à­",
        "choose_image": "à¬à¬• à¬šà¬¿à¬¤à­à¬° à¬¬à¬¾à¬›à¬¨à­à¬¤à­...",
        "analyzing": "ðŸ” à¬†à¬ªà¬£à¬™à­à¬• à¬‰à¬¦à­à¬­à¬¿à¬¦ à¬šà¬¿à¬¤à­à¬° à¬¬à¬¿à¬¶à­à¬³à­‡à¬·à¬£ à¬•à¬°à¬¾à¬¯à¬¾à¬‰à¬›à¬¿...",
        "prediction": "âœ… à¬ªà­‚à¬°à­à¬¬à¬¾à¬¨à­à¬®à¬¾à¬¨: ",
        "chatbot_title": "ðŸ’¬ AgriVoice à¬šà¬¾à¬Ÿà¬¬à¬Ÿ",
        "open_chatbot": "à¬šà¬¾à¬Ÿà¬¬à¬Ÿ à¬–à­‹à¬²à¬¨à­à¬¤à­",
        "chatbot_header": "ðŸ¤– à¬šà¬¾à¬Ÿà¬¬à¬Ÿ à¬¸à¬¹à¬¾à­Ÿà¬•",
        "image_options": "ðŸ–¼ï¸ à¬¬à¬¿à¬•à¬³à­à¬ª: à¬¬à¬¿à¬¶à­à¬³à­‡à¬·à¬£ à¬ªà¬¾à¬‡à¬ à¬šà¬¿à¬¤à­à¬° à¬¬à­à­Ÿà¬¬à¬¹à¬¾à¬° à¬•à¬°à¬¨à­à¬¤à­",
        "use_detection_image": "ðŸ“¤ à¬°à­‹à¬— à¬šà¬¿à¬¹à­à¬¨à¬Ÿ à¬šà¬¿à¬¤à­à¬° à¬¬à­à­Ÿà¬¬à¬¹à¬¾à¬° à¬•à¬°à¬¨à­à¬¤à­",
        "upload_new_image": "âž• à¬¨à­‚à¬¤à¬¨ à¬šà¬¿à¬¤à­à¬° à¬…à¬ªà¬²à­‹à¬¡à­ à¬•à¬°à¬¨à­à¬¤à­",
        "using_detection_image": "à¬°à­‹à¬— à¬šà¬¿à¬¹à­à¬¨à¬Ÿ à¬šà¬¿à¬¤à­à¬° à¬¬à­à­Ÿà¬¬à¬¹à¬¾à¬° à¬•à¬°à­à¬›à¬¿",
        "using_detection_success": "âœ… à¬°à­‹à¬— à¬šà¬¿à¬¹à­à¬¨à¬Ÿ à¬šà¬¿à¬¤à­à¬° à¬¬à­à­Ÿà¬¬à¬¹à¬¾à¬° à¬•à¬°à¬¾à¬¯à¬¾à¬‰à¬›à¬¿!",
        "no_detection_image": "âš ï¸ à¬°à­‹à¬— à¬šà¬¿à¬¹à­à¬¨à¬Ÿà¬°à­ à¬•à­Œà¬£à¬¸à¬¿ à¬šà¬¿à¬¤à­à¬° à¬¨à¬¾à¬¹à¬¿à¬ | à¬¦à­Ÿà¬¾ à¬•à¬°à¬¿ à¬‰à¬ªà¬°à­‹à¬•à­à¬¤ à¬šà¬¿à¬¤à­à¬° à¬…à¬ªà¬²à­‹à¬¡à­ à¬•à¬°à¬¨à­à¬¤à­ |",
        "upload_chatbot_image": "à¬šà¬¾à¬Ÿà¬¬à¬Ÿ à¬¸à¬¹à¬¿à¬¤ à¬†à¬²à­‹à¬šà¬¨à¬¾ à¬•à¬°à¬¿à¬¬à¬¾à¬•à­ à¬à¬• à¬šà¬¿à¬¤à­à¬° à¬¬à¬¾à¬›à¬¨à­à¬¤à­ (à¬¬à¬¿à¬•à¬³à­à¬ª)...",
        "image_loaded": "âœ… à¬šà¬¿à¬¤à­à¬° à¬²à­‹à¬¡à­ à¬¹à­‹à¬‡à¬›à¬¿ | à¬à¬¬à­‡ à¬†à¬ªà¬£ à¬à¬¹à¬¿ à¬šà¬¿à¬¤à­à¬° à¬¬à¬¿à¬·à­Ÿà¬°à­‡ à¬ªà­à¬°à¬¶à­à¬¨ à¬ªà­à¬›à¬¿à¬ªà¬¾à¬°à¬¿à¬¬à­‡ |",
        "clear_image": "à¬à¬¹à¬¿ à¬šà¬¿à¬¤à­à¬°à¬•à­ à¬¸à¬«à¬¾ à¬•à¬°à¬¨à­à¬¤à­",
        "type_message": "à¬†à¬ªà¬£à¬™à­à¬• à¬¬à¬¾à¬°à­à¬¤à­à¬¤à¬¾ à¬Ÿà¬¾à¬‡à¬ªà­ à¬•à¬°à¬¨à­à¬¤à­:",
        "voice_mode": "ðŸŽ™ï¸ à¬­à¬à¬¸à­ à¬šà¬¾à¬Ÿà­ à¬®à­‹à¬¡à­:",
        "start_recording": "ðŸŽ¤ à¬°à­‡à¬•à¬°à­à¬¡à¬¿à¬‚ à¬¶à­à¬°à­ à¬•à¬°à¬¨à­à¬¤à­",
        "stop_recording": "ðŸŸ¥ à¬°à­‡à¬•à¬°à­à¬¡à¬¿à¬‚ à¬¬à¬¨à­à¬¦ à¬•à¬°à¬¨à­à¬¤à­",
        "recording_status": "à¬°à­‡à¬•à¬°à­à¬¡à¬¿à¬‚... à¬¬à¬°à­à¬¤à­à¬¤à¬®à¬¾à¬¨ à¬•à¬¥à¬¾ à¬•à¬¹à¬¨à­à¬¤à­! ðŸ”´",
        "mic_hint": "*(à¬°à­‡à¬•à¬°à­à¬¡à¬¿à¬‚ à¬¶à­à¬°à­ à¬•à¬°à¬¿à¬¬à¬¾à¬•à­ à¬®à¬¾à¬‡à¬•à¬°à­‡ à¬•à­à¬²à¬¿à¬•à­ à¬•à¬°à¬¨à­à¬¤à­)*",
        "recording_stopped": "ðŸŽ¤ à¬°à­‡à¬•à¬°à­à¬¡à¬¿à¬‚ à¬¬à¬¨à­à¬¦ à¬•à¬°à¬¾à¬—à¬²à¬¾ | à¬ªà­à¬°à¬¸à­‡à¬¸à¬¿à¬‚à¬—...",
        "you_said": "âœ… à¬†à¬ªà¬£ à¬•à¬¹à¬¿à¬›à­‡à¬¨",
        "could_not_understand": "âš ï¸ à¬†à¬ªà¬£à¬™à­à¬• à¬†à¬¡à¬¼à¬¿ à¬¬à­à¤à­â€à¬¿à¬ªà¬¾à¬°à¬¿à¬²à­‡ à¬¨à¬¾à¬¹à¬¿à¬ |",
        "speech_error": "âŒ à¬¸à­à¬ªà¬¿à¬šà­ à¬¸à¬°à­à¬­à¬¿à¬¸ à¬à¬°à­‹à¬°: ",
        "could_not_generate_speech": "ðŸ”‡ à¬¸à­à¬ªà¬¿à¬šà­ à¬œà­‡à¬¨à­‡à¬°à­‡à¬Ÿà­ à¬•à¬°à¬¿à¬ªà¬¾à¬°à¬¿à¬²à­‡ à¬¨à¬¾à¬¹à¬¿à¬: ",
        "error": "à¬à¬°à­‹à¬°: ",
    },
    "Punjabi (à¨ªà©°à¨œà¨¾à¨¬à©€)": {
        "upload_disease_header": "ðŸ§ª à¨°à©‹à¨— à¨¦à¨¾ à¨ªà¨¤à¨¾ à¨²à¨—à¨¾à¨‰à¨£ à¨²à¨ˆ à¨«à¨²/à¨ªà©±à¨¤à©‡ à¨¦à©€ à¨¤à¨¸à¨µà©€à¨° à¨…à¨ªà¨²à©‹à¨¡ à¨•à¨°à©‹",
        "choose_image": "à¨‡à©±à¨• à¨¤à¨¸à¨µà©€à¨° à¨šà©à¨£à©‹...",
        "analyzing": "ðŸ” à¨†à¨ªà¨£à©‡ à¨ªà©Œà¨¦à©‡ à¨¦à©€ à¨¤à¨¸à¨µà©€à¨° à¨¦à¨¾ à¨µà¨¿à¨¸à¨¼à¨²à©‡à¨¸à¨¼à¨£ à¨•à©€à¨¤à¨¾ à¨œà¨¾ à¨°à¨¿à¨¹à¨¾ à¨¹à©ˆ...",
        "prediction": "âœ… à¨­à¨µà¨¿à©±à¨–à¨¬à¨¾à¨£à©€: ",
        "chatbot_title": "ðŸ’¬ AgriVoice à¨šà©ˆà¨Ÿà¨¬à©Œà¨Ÿ",
        "open_chatbot": "à¨šà©ˆà¨Ÿà¨¬à©Œà¨Ÿ à¨–à©‹à¨²à©‹",
        "chatbot_header": "ðŸ¤– à¨šà©ˆà¨Ÿà¨¬à©Œà¨Ÿ à¨¸à¨¹à¨¾à¨‡à¨•",
        "image_options": "ðŸ–¼ï¸ à¨µà¨¿à¨•à¨²à¨ª: à¨µà¨¿à¨¸à¨¼à¨²à©‡à¨¸à¨¼à¨£ à¨²à¨ˆ à¨¤à¨¸à¨µà©€à¨° à¨¦à©€ à¨µà¨°à¨¤à©‹à¨‚ à¨•à¨°à©‹",
        "use_detection_image": "ðŸ“¤ à¨°à©‹à¨— à¨–à©‹à¨œ à¨¤à¨¸à¨µà©€à¨° à¨¦à©€ à¨µà¨°à¨¤à©‹à¨‚ à¨•à¨°à©‹",
        "upload_new_image": "âž• à¨¨à¨µà©€ à¨¤à¨¸à¨µà©€à¨° à¨…à¨ªà¨²à©‹à¨¡ à¨•à¨°à©‹",
        "using_detection_image": "à¨°à©‹à¨— à¨–à©‹à¨œ à¨¤à¨¸à¨µà©€à¨° à¨¦à©€ à¨µà¨°à¨¤à©‹à¨‚ à¨•à¨° à¨°à¨¿à¨¹à¨¾ à¨¹à©ˆ",
        "using_detection_success": "âœ… à¨°à©‹à¨— à¨–à©‹à¨œ à¨¤à¨¸à¨µà©€à¨° à¨¦à©€ à¨µà¨°à¨¤à©‹à¨‚ à¨•à©€à¨¤à©€ à¨œà¨¾ à¨°à¨¹à©€ à¨¹à©ˆ!",
        "no_detection_image": "âš ï¸ à¨°à©‹à¨— à¨–à©‹à¨œ à¨¤à©‹à¨‚ à¨•à©‹à¨ˆ à¨¤à¨¸à¨µà©€à¨° à¨¨à¨¹à©€à¨‚à¥¤ à¨•à¨¿à¨°à¨ªà¨¾ à¨•à¨°à¨•à©‡ à¨‰à©±à¨ªà¨° à¨‡à©±à¨• à¨¤à¨¸à¨µà©€à¨° à¨…à¨ªà¨²à©‹à¨¡ à¨•à¨°à©‹à¥¤",
        "upload_chatbot_image": "à¨šà©ˆà¨Ÿà¨¬à©Œà¨Ÿ à¨¨à¨¾à¨² à¨šà¨°à¨šà¨¾ à¨•à¨°à¨¨ à¨²à¨ˆ à¨‡à©±à¨• à¨¤à¨¸à¨µà©€à¨° à¨šà©à¨£à©‹ (à¨µà¨¿à¨•à¨²à¨ª)...",
        "image_loaded": "âœ… à¨¤à¨¸à¨µà©€à¨° à¨²à©‹à¨¡ à¨¹à©‹ à¨—à¨ˆ à¨¹à©ˆ! à¨¹à©à¨£ à¨¤à©à¨¸à©€à¨‚ à¨‡à¨¸ à¨¤à¨¸à¨µà©€à¨° à¨¬à¨¾à¨°à©‡ à¨¸à¨µà¨¾à¨² à¨ªà©à©±à¨› à¨¸à¨•à¨¦à©‡ à¨¹à©‹à¥¤",
        "clear_image": "à¨‡à¨¸ à¨¤à¨¸à¨µà©€à¨° à¨¨à©‚à©° à¨¸à¨¾à¨« à¨•à¨°à©‹",
        "type_message": "à¨†à¨ªà¨£à¨¾ à¨¸à©°à¨¦à©‡à¨¸à¨¼ à¨Ÿà¨¾à¨ˆà¨ª à¨•à¨°à©‹:",
        "voice_mode": "ðŸŽ™ï¸ à¨µà©Œà¨‡à¨¸ à¨šà©ˆà¨Ÿ à¨®à©‹à¨¡:",
        "start_recording": "ðŸŽ¤ à¨°à¨¿à¨•à¨¾à¨°à¨¡à¨¿à©°à¨— à¨¸à¨¼à©à¨°à©‚ à¨•à¨°à©‹",
        "stop_recording": "ðŸŸ¥ à¨°à¨¿à¨•à¨¾à¨°à¨¡à¨¿à©°à¨— à¨¬à©°à¨¦ à¨•à¨°à©‹",
        "recording_status": "à¨°à¨¿à¨•à¨¾à¨°à¨¡à¨¿à©°à¨—... à¨¹à©à¨£ à¨¬à©‹à¨²à©‹! ðŸ”´",
        "mic_hint": "*(à¨°à¨¿à¨•à¨¾à¨°à¨¡à¨¿à©°à¨— à¨¸à¨¼à©à¨°à©‚ à¨•à¨°à¨¨ à¨²à¨ˆ à¨®à¨¾à¨ˆà¨• 'à¨¤à©‡ à¨•à¨²à¨¿à¨• à¨•à¨°à©‹)*",
        "recording_stopped": "ðŸŽ¤ à¨°à¨¿à¨•à¨¾à¨°à¨¡à¨¿à©°à¨— à¨¬à©°à¨¦ à¨•à©€à¨¤à©€ à¨—à¨ˆà¥¤ à¨ªà©à¨°à¨¾à¨¸à©ˆà¨¸à¨¿à©°à¨—...",
        "you_said": "âœ… à¨¤à©à¨¸à©€à¨‚ à¨•à¨¿à¨¹à¨¾",
        "could_not_understand": "âš ï¸ à¨¤à©à¨¹à¨¾à¨¡à©€ à¨†à¨µà¨¾à¨œà¨¼ à¨¨à©‚à©° à¨¸à¨®à¨ à¨¨à¨¹à©€à¨‚ à¨¸à¨•à¨¿à¨†à¥¤",
        "speech_error": "âŒ à¨¸à¨ªà©€à¨š à¨¸à¨°à¨µà¨¿à¨¸ à¨—à¨²à¨¤à©€: ",
        "could_not_generate_speech": "ðŸ”‡ à¨¸à¨ªà©€à¨š à¨œà¨¨à¨°à©‡à¨Ÿ à¨¨à¨¹à©€à¨‚ à¨•à¨° à¨¸à¨•à©‡: ",
        "error": "à¨—à¨²à¨¤à©€: ",
    },
    "Urdu (Ø§Ø±Ø¯Ùˆ)": {
        "upload_disease_header": "ðŸ§ª Ø¨ÛŒÙ…Ø§Ø±ÛŒ Ú©ÛŒ Ø´Ù†Ø§Ø®Øª Ú©Û’ Ù„ÛŒÛ’ Ù¾Ú¾Ù„/Ù¾ØªÛ’ Ú©ÛŒ ØªØµÙˆÛŒØ± Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº",
        "choose_image": "Ø§ÛŒÚ© ØªØµÙˆÛŒØ± Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº...",
        "analyzing": "ðŸ” Ø¢Ù¾ Ú©Û’ Ù¾ÙˆØ¯Û’ Ú©ÛŒ ØªØµÙˆÛŒØ± Ú©Ø§ ØªØ¬Ø²ÛŒÛ Ú©ÛŒØ§ Ø¬Ø§ Ø±ÛØ§ ÛÛ’...",
        "prediction": "âœ… Ù¾ÛŒØ´ Ú¯ÙˆØ¦ÛŒ: ",
        "chatbot_title": "ðŸ’¬ AgriVoice Ú†ÛŒÙ¹ Ø¨ÙˆÙ¹",
        "open_chatbot": "Ú†ÛŒÙ¹ Ø¨ÙˆÙ¹ Ú©Ú¾ÙˆÙ„ÛŒÚº",
        "chatbot_header": "ðŸ¤– Ú†ÛŒÙ¹ Ø¨ÙˆÙ¹ Ù…Ø¹Ø§ÙˆÙ†",
        "image_options": "ðŸ–¼ï¸ Ø§Ø®ØªÛŒØ§Ø±ÛŒ: ØªØ¬Ø²ÛŒÛ Ú©Û’ Ù„ÛŒÛ’ ØªØµÙˆÛŒØ± Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº",
        "use_detection_image": "ðŸ“¤ Ø¨ÛŒÙ…Ø§Ø±ÛŒ Ú©ÛŒ Ø´Ù†Ø§Ø®Øª Ú©ÛŒ ØªØµÙˆÛŒØ± Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø±ÛŒÚº",
        "upload_new_image": "âž• Ù†Ø¦ÛŒ ØªØµÙˆÛŒØ± Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚº",
        "using_detection_image": "Ø¨ÛŒÙ…Ø§Ø±ÛŒ Ú©ÛŒ Ø´Ù†Ø§Ø®Øª Ú©ÛŒ ØªØµÙˆÛŒØ± Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©Ø± Ø±ÛÛ’ ÛÛŒÚº",
        "using_detection_success": "âœ… Ø¨ÛŒÙ…Ø§Ø±ÛŒ Ú©ÛŒ Ø´Ù†Ø§Ø®Øª Ú©ÛŒ ØªØµÙˆÛŒØ± Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ú©ÛŒ Ø¬Ø§ Ø±ÛÛŒ ÛÛ’!",
        "no_detection_image": "âš ï¸ Ø¨ÛŒÙ…Ø§Ø±ÛŒ Ú©ÛŒ Ø´Ù†Ø§Ø®Øª Ø³Û’ Ú©ÙˆØ¦ÛŒ ØªØµÙˆÛŒØ± Ù†ÛÛŒÚºÛ” Ø¨Ø±Ø§Û Ú©Ø±Ù… Ø§ÙˆÙ¾Ø± ØªØµÙˆÛŒØ± Ø§Ù¾ Ù„ÙˆÚˆ Ú©Ø±ÛŒÚºÛ”",
        "upload_chatbot_image": "Ú†ÛŒÙ¹ Ø¨ÙˆÙ¹ Ú©Û’ Ø³Ø§ØªÚ¾ Ø¨Ø­Ø« Ú©Ø±Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ ØªØµÙˆÛŒØ± Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)...",
        "image_loaded": "âœ… ØªØµÙˆÛŒØ± Ù„ÙˆÚˆ ÛÙˆ Ú¯Ø¦ÛŒ ÛÛ’! Ø§Ø¨ Ø¢Ù¾ Ø§Ø³ ØªØµÙˆÛŒØ± Ú©Û’ Ø¨Ø§Ø±Û’ Ù…ÛŒÚº Ø³ÙˆØ§Ù„Ø§Øª Ù¾ÙˆÚ†Ú¾ Ø³Ú©ØªÛ’ ÛÛŒÚºÛ”",
        "clear_image": "Ø§Ø³ ØªØµÙˆÛŒØ± Ú©Ùˆ ØµØ§Ù Ú©Ø±ÛŒÚº",
        "type_message": "Ø§Ù¾Ù†Ø§ Ù¾ÛŒØºØ§Ù… Ù¹Ø§Ø¦Ù¾ Ú©Ø±ÛŒÚº:",
        "voice_mode": "ðŸŽ™ï¸ ÙˆØ§Ø¦Ø³ Ú†ÛŒÙ¹ Ù…ÙˆÚˆ:",
        "start_recording": "ðŸŽ¤ Ø±ÛŒÚ©Ø§Ø±ÚˆÙ†Ú¯ Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº",
        "stop_recording": "ðŸŸ¥ Ø±ÛŒÚ©Ø§Ø±ÚˆÙ†Ú¯ Ø±ÙˆÚ©ÛŒÚº",
        "recording_status": "Ø±ÛŒÚ©Ø§Ø±ÚˆÙ†Ú¯... Ø§Ø¨ Ø¨Ø§Øª Ú©Ø±ÛŒÚº! ðŸ”´",
        "mic_hint": "*(Ø±ÛŒÚ©Ø§Ø±ÚˆÙ†Ú¯ Ø´Ø±ÙˆØ¹ Ú©Ø±Ù†Û’ Ú©Û’ Ù„ÛŒÛ’ Ù…Ø§Ø¦ÛŒÚ© Ù¾Ø± Ú©Ù„Ú© Ú©Ø±ÛŒÚº)*",
        "recording_stopped": "ðŸŽ¤ Ø±ÛŒÚ©Ø§Ø±ÚˆÙ†Ú¯ Ø¨Ù†Ø¯ Ú©Ø± Ø¯ÛŒ Ú¯Ø¦ÛŒÛ” Ù¾Ø±ÙˆØ³ÛŒØ³Ù†Ú¯...",
        "you_said": "âœ… Ø¢Ù¾ Ù†Û’ Ú©ÛØ§",
        "could_not_understand": "âš ï¸ Ø¢Ù¾ Ú©ÛŒ Ø¢ÙˆØ§Ø² Ø³Ù…Ø¬Ú¾ Ù†ÛÛŒÚº Ø¢Ø¦ÛŒÛ”",
        "speech_error": "âŒ ØªÙ‚Ø±ÛŒØ± Ú©ÛŒ Ø®Ø¯Ù…Øª Ù…ÛŒÚº Ø®Ø±Ø§Ø¨ÛŒ: ",
        "could_not_generate_speech": "ðŸ”‡ ØªÙ‚Ø±ÛŒØ± ØªÛŒØ§Ø± Ù†ÛÛŒÚº Ú©Ø± Ø³Ú©Û’: ",
        "error": "Ø®Ø±Ø§Ø¨ÛŒ: ",
    },
    "Malayalam (à´®à´²à´¯à´¾à´³à´‚)": {
        "upload_disease_header": "ðŸ§ª à´°àµ‹à´—à´‚ à´•à´£àµà´Ÿàµ†à´¤àµà´¤àµà´¨àµà´¨à´¤à´¿à´¨à´¾à´¯à´¿ à´ªà´´à´‚/à´‡à´²à´¯àµà´Ÿàµ† à´šà´¿à´¤àµà´°à´‚ à´…à´ªàµâ€Œà´²àµ‹à´¡àµ à´šàµ†à´¯àµà´¯àµà´•",
        "choose_image": "à´’à´°àµ à´šà´¿à´¤àµà´°à´‚ à´¤à´¿à´°à´žàµà´žàµ†à´Ÿàµà´•àµà´•àµà´•...",
        "analyzing": "ðŸ” à´¨à´¿à´™àµà´™à´³àµà´Ÿàµ† à´šàµ†à´Ÿà´¿à´¯àµà´Ÿàµ† à´šà´¿à´¤àµà´°à´‚ à´µà´¿à´¶à´•à´²à´¨à´‚ à´šàµ†à´¯àµà´¯àµà´•à´¯à´¾à´£àµ...",
        "prediction": "âœ… à´ªàµà´°à´µà´šà´¨à´‚: ",
        "chatbot_title": "ðŸ’¬ AgriVoice à´šà´¾à´±àµà´±àµà´¬àµ‹à´Ÿàµà´Ÿàµ",
        "open_chatbot": "à´šà´¾à´±àµà´±àµà´¬àµ‹à´Ÿàµà´Ÿàµ à´¤àµà´±à´•àµà´•àµà´•",
        "chatbot_header": "ðŸ¤– à´šà´¾à´±àµà´±àµà´¬àµ‹à´Ÿàµà´Ÿàµ à´¸à´¹à´¾à´¯à´¿",
        "image_options": "ðŸ–¼ï¸ à´à´šàµà´›à´¿à´•à´‚: à´µà´¿à´¶à´•à´²à´¨à´¤àµà´¤à´¿à´¨à´¾à´¯à´¿ à´šà´¿à´¤àµà´°à´‚ à´‰à´ªà´¯àµ‹à´—à´¿à´•àµà´•àµà´•",
        "use_detection_image": "ðŸ“¤ à´°àµ‹à´— à´¸à¦¨à´¾à´•àµà´¤à´¿à´¯àµà´Ÿàµ† à´šà´¿à´¤àµà´°à´‚ à´‰à´ªà´¯àµ‹à´—à´¿à´•àµà´•àµà´•",
        "upload_new_image": "âž• à´ªàµà´¤à´¿à´¯ à´šà´¿à´¤àµà´°à´‚ à´…à´ªàµâ€Œà´²àµ‹à´¡àµ à´šàµ†à´¯àµà´¯àµà´•",
        "using_detection_image": "à´°àµ‹à´— à´¸à´¨à´¾à´•àµà´¤ à´šà´¿à´¤àµà´°à´‚ à´‰à´ªà´¯àµ‹à´—à´¿à´•àµà´•àµà´¨àµà´¨àµ",
        "using_detection_success": "âœ… à´°àµ‹à´— à´¸à´¨à´¾à´•àµà´¤ à´šà´¿à´¤àµà´°à´‚ à´‰à´ªà´¯àµ‹à´—à´¿à´•àµà´•àµà´•à´¯à´¾à´£àµ!",
        "no_detection_image": "âš ï¸ à´°àµ‹à´— à´¸à´¨à´¾à´•àµà´¤à´¿à´¯à´¿àµ½ à´¨à´¿à´¨àµà´¨àµ‹ à´šà´¿à´¤àµà´°à´‚ à´‡à´²àµà´². à´¨à´¿à´™àµà´™àµ¾ à´’à´°àµ à´šà´¿à´¤àµà´°à´‚ à´…à´ªàµâ€Œà´²àµ‹à´¡àµ à´šàµ†à´¯àµà´¯àµà´•.",
        "upload_chatbot_image": "à´šà´¾à´±àµà´±àµà´¬àµ‹à´Ÿàµà´Ÿàµà´®à´¾à´¯à´¿ à´šàµ¼à´šàµà´š à´šàµ†à´¯àµà´¯àµà´¨àµà´¨à´¤à´¿à´¨à´¾à´¯à´¿ à´’à´°àµ à´šà´¿à´¤àµà´°à´‚ à´¤à´¿à´°à´žàµà´žàµ†à´Ÿàµà´•àµà´•àµà´• (à´à´šàµà´›à´¿à´•à´‚)...",
        "image_loaded": "âœ… à´šà´¿à´¤àµà´°à´‚ à´²àµ‹à´¡àµ à´šàµ†à´¯àµà´¯à´ªàµà´ªàµ†à´Ÿàµà´Ÿàµ! à´¨à´¿à´™àµà´™àµ¾ à´‡à´ªàµà´ªàµ‹àµ¾ à´ˆ à´šà´¿à´¤àµà´°à´¤àµà´¤àµ†à´•àµà´•àµà´±à´¿à´šàµà´šàµ à´šàµ‹à´¦àµà´¯à´™àµà´™àµ¾ à´šàµ‹à´¦à´¿à´šàµà´šàµà´¤à´°à´¾à´‚.",
        "clear_image": "à´ˆ à´šà´¿à´¤àµà´°à´‚ à´¤àµà´Ÿà´šàµà´šàµà´®à´¾à´±àµà´±àµà´•",
        "type_message": "à´¨à´¿à´™àµà´™à´³àµà´Ÿàµ† à´¸à´¨àµà´¦àµ‡à´¶à´‚ à´Ÿàµˆà´ªàµ à´šàµ†à´¯àµà´¯àµà´•:",
        "voice_mode": "ðŸŽ™ï¸ à´µàµ‹à´¯à´¿à´¸àµ à´šà´¾à´±àµà´±àµ à´®àµ‹à´¡àµ:",
        "start_recording": "ðŸŽ¤ à´±àµ†à´•àµà´•àµ‹àµ¼à´¡à´¿à´‚à´—àµ à´†à´°à´‚à´­à´¿à´•àµà´•àµà´•",
        "stop_recording": "ðŸŸ¥ à´±àµ†à´•àµà´•àµ‹àµ¼à´¡à´¿à´‚à´—àµ à´¨à´¿àµ¼à´¤àµà´¤àµà´•",
        "recording_status": "à´±àµ†à´•àµà´•àµ‹àµ¼à´¡à´¿à´‚à´—àµ... à´‡à´ªàµà´ªàµ‹àµ¾ à´¸à´‚à´¸à´¾à´°à´¿à´•àµà´•àµà´•! ðŸ”´",
        "mic_hint": "*(à´±àµ†à´•àµà´•àµ‹àµ¼à´¡à´¿à´‚à´—àµ à´†à´°à´‚à´­à´¿à´•àµà´•àµà´¨àµà´¨à´¤à´¿à´¨àµ à´®àµˆà´•àµà´•à´¿àµ½ à´•àµà´²à´¿à´•àµà´•àµ à´šàµ†à´¯àµà´¯àµà´•)*",
        "recording_stopped": "ðŸŽ¤ à´±àµ†à´•àµà´•àµ‹àµ¼à´¡à´¿à´‚à´—àµ à´¨à´¿àµ¼à´¤àµà´¤à´¿à´¯à´¿à´°à´¿à´•àµà´•àµà´¨àµà´¨àµ. à´ªàµà´°àµ‹à´¸à´¸àµà´¸à´¿à´‚à´—àµ...",
        "you_said": "âœ… à´¨à´¿à´™àµà´™àµ¾ à´ªà´±à´žàµà´žàµ",
        "could_not_understand": "âš ï¸ à´¨à´¿à´™àµà´™à´³àµà´Ÿàµ† à´¶à´¬àµà´¦à´‚ à´®à´¨à´¸àµà´¸à´¿à´²à´¾à´¯à´¿à´²àµà´².",
        "speech_error": "âŒ à´¸àµà´ªàµ€à´šàµ à´¸àµ‡à´µà´¨ à´ªà´¿à´¶à´•àµ: ",
        "could_not_generate_speech": "ðŸ”‡ à´¸àµà´ªàµ€à´šàµ à´¸àµƒà´·àµà´Ÿà´¿à´•àµà´•à´¾àµ» à´•à´´à´¿à´žàµà´žà´¿à´²àµà´²: ",
        "error": "à´ªà´¿à´¶à´•àµ: ",
    },
    "Kannada (à²•à²¨à³à²¨à²¡)": {
        "upload_disease_header": "ðŸ§ª à²°à³‹à²— à²•à²‚à²¡à³à²¹à²¿à²¡à²¿à²¯à²²à³ à²¹à²£à³à²£à³/à²Žà²²à³†à²¯ à²šà²¿à²¤à³à²° à²…à²ªà³à²²à³‹à²¡à³ à²®à²¾à²¡à²¿",
        "choose_image": "à²’à²‚à²¦à³ à²šà²¿à²¤à³à²° à²†à²¯à³à²•à³† à²®à²¾à²¡à²¿...",
        "analyzing": "ðŸ” à²¨à²¿à²®à³à²® à²¸à²¸à³à²¯à²¦ à²šà²¿à²¤à³à²°à²µà²¨à³à²¨à³ à²µà²¿à²¶à³à²²à³‡à²·à²¿à²¸à²²à²¾à²—à³à²¤à³à²¤à²¿à²¦à³†...",
        "prediction": "âœ… à²­à²µà²¿à²·à³à²¯à²¦ à²µà²¾à²£à²¿: ",
        "chatbot_title": "ðŸ’¬ AgriVoice à²šà²¾à²Ÿà³â€Œà²¬à²¾à²Ÿà³",
        "open_chatbot": "à²šà²¾à²Ÿà³â€Œà²¬à²¾à²Ÿà³ à²¤à³†à²°à³†à²¯à²¿à²°à²¿",
        "chatbot_header": "ðŸ¤– à²šà²¾à²Ÿà³â€Œà²¬à²¾à²Ÿà³ à²¸à²¹à²¾à²¯à²•",
        "image_options": "ðŸ–¼ï¸ à²à²šà³à²›à²¿à²•: à²µà²¿à²¶à³à²²à³‡à²·à²£à³†à²—à²¾à²—à²¿ à²šà²¿à²¤à³à²° à²¬à²³à²¸à²¿",
        "use_detection_image": "ðŸ“¤ à²°à³‹à²— à²¸à²¨à³à²¨à²¿à²µà³‡à²¶à²¨ à²šà²¿à²¤à³à²° à²¬à²³à²¸à²¿",
        "upload_new_image": "âž• à²¹à³Šà²¸ à²šà²¿à²¤à³à²° à²…à²ªà³à²²à³‹à²¡à³ à²®à²¾à²¡à²¿",
        "using_detection_image": "à²°à³‹à²— à²¸à²¨à³à²¨à²¿à²µà³‡à²¶à²¨ à²šà²¿à²¤à³à²°à²µà²¨à³à²¨à³ à²¬à²³à²¸à³à²¤à³à²¤à²¿à²¦à³†",
        "using_detection_success": "âœ… à²°à³‹à²— à²¸à²¨à³à²¨à²¿à²µà³‡à²¶à²¨ à²šà²¿à²¤à³à²° à²¬à²³à²¸à²²à²¾à²—à³à²¤à³à²¤à²¿à²¦à³†!",
        "no_detection_image": "âš ï¸ à²°à³‹à²— à²¸à²¨à³à²¨à²¿à²µà³‡à²¶à²¨à²¦à²¿à²‚à²¦ à²¯à²¾à²µà³à²¦à³‡ à²šà²¿à²¤à³à²° à²‡à²²à³à²². à²¦à²¯à²µà²¿à²Ÿà³à²Ÿà³ à²®à³‡à²²à³† à²’à²‚à²¦à³ à²šà²¿à²¤à³à²° à²…à²ªà³à²²à³‹à²¡à³ à²®à²¾à²¡à²¿.",
        "upload_chatbot_image": "à²šà²¾à²Ÿà³â€Œà²¬à²¾à²Ÿà³â€Œà²¨à³Šà²‚à²¦à²¿à²—à³† à²šà²°à³à²šà³† à²®à²¾à²¡à²²à³ à²’à²‚à²¦à³ à²šà²¿à²¤à³à²° à²†à²¯à³à²•à³† à²®à²¾à²¡à²¿ (à²à²šà³à²›à²¿à²•)...",
        "image_loaded": "âœ… à²šà²¿à²¤à³à²° à²²à³‹à²¡à³ à²†à²—à²¿à²¦à³†! à²¨à³€à²µà³ à²ˆà²— à²ˆ à²šà²¿à²¤à³à²°à²¦ à²¬à²—à³à²—à³† à²ªà³à²°à²¶à³à²¨à³†à²—à²³à²¨à³à²¨à³ à²•à³‡à²³à²¬à²¹à³à²¦à³.",
        "clear_image": "à²ˆ à²šà²¿à²¤à³à²° à²¸à³à²ªà²·à³à²Ÿ à²®à²¾à²¡à²¿",
        "type_message": "à²¨à²¿à²®à³à²® à²¸à²‚à²¦à³‡à²¶à²µà²¨à³à²¨à³ à²Ÿà³ˆà²ªà³ à²®à²¾à²¡à²¿:",
        "voice_mode": "ðŸŽ™ï¸ à²§à³à²µà²¨à²¿ à²šà²¾à²Ÿà³ à²®à³‹à²¡à³:",
        "start_recording": "ðŸŽ¤ à²°à³†à²•à²¾à²°à³à²¡à²¿à²‚à²—à³ à²ªà³à²°à²¾à²°à²‚à²­à²¿à²¸à²¿",
        "stop_recording": "ðŸŸ¥ à²°à³†à²•à²¾à²°à³à²¡à²¿à²‚à²—à³ à²¨à²¿à²²à³à²²à²¿à²¸à²¿",
        "recording_status": "à²°à³†à²•à²¾à²°à³à²¡à²¿à²‚à²—à³... à²ˆà²— à²®à²¾à²¤à²¨à²¾à²¡à²¿! ðŸ”´",
        "mic_hint": "*(à²°à³†à²•à²¾à²°à³à²¡à²¿à²‚à²—à³ à²ªà³à²°à²¾à²°à²‚à²­à²¿à²¸à²²à³ à²®à³ˆà²•à³â€Œà²¨à²²à³à²²à²¿ à²•à³à²²à²¿à²•à³ à²®à²¾à²¡à²¿)*",
        "recording_stopped": "ðŸŽ¤ à²°à³†à²•à²¾à²°à³à²¡à²¿à²‚à²—à³ à²¸à³à²¥à²—à²¿à²¤à²—à³Šà²‚à²¡à²¿à²¦à³†. à²¸à²‚à²¸à³à²•à²°à²£à³†...",
        "you_said": "âœ… à²¨à³€à²µà³ à²¹à³‡à²³à²¿à²¦à³à²¦à³",
        "could_not_understand": "âš ï¸ à²¨à²¿à²®à³à²® à²§à³à²µà²¨à²¿ à²…à²°à³à²¥à²µà²¾à²—à²²à²¿à²²à³à²².",
        "speech_error": "âŒ à²­à²¾à²·à²£ à²¸à³‡à²µà³† à²¦à³‹à²·: ",
        "could_not_generate_speech": "ðŸ”‡ à²­à²¾à²·à²£ à²‰à²¤à³à²ªà²¾à²¦à²¿à²¸à²²à³ à²¸à²¾à²§à³à²¯à²µà²¾à²—à²²à²¿à²²à³à²²: ",
        "error": "à²¦à³‹à²·: ",
    },
}

# ===============================
# Image Detection
# ===============================
st.header("ðŸ§ª Upload a fruit/leaf image to detect disease")
uploaded_file = st.file_uploader("Choose an image...", type=["jpg", "jpeg", "png"])

if uploaded_file is not None:
    # Store the uploaded file in session state for use in chatbot
    if 'disease_detection_image' not in st.session_state:
        st.session_state['disease_detection_image'] = None
    st.session_state['disease_detection_image'] = uploaded_file
    
    image = Image.open(uploaded_file).convert('RGB')
    
    # Display image in smaller columns like chatbot
    col1, col2 = st.columns([1, 2])
    with col1:
        st.image(image, caption='Uploaded Image', use_container_width=True)
    with col2:
        st.info("ðŸ” Analyzing your plant image...")
    
    img = image.resize((224, 224))
    img_array = np.array(img)
    img_array = img_array.reshape(1, 224, 224, 3) / 255.0
    prediction = model.predict(img_array)
    pred_label = labels[np.argmax(prediction)]
    
    # Store the prediction in session state for use in chatbot
    st.session_state['disease_prediction'] = pred_label
    
    # Display prediction in col2
    with col2:
        st.success(f"âœ… Prediction: {pred_label}")

# ===============================
# Odia Language Helper Functions
# ===============================
@st.cache_resource
def load_odia_stt_model():
    """Load Odia STT model"""
    model_name = "ai4bharat/indicwav2vec-odia"
    processor = Wav2Vec2Processor.from_pretrained(model_name)
    model = Wav2Vec2ForCTC.from_pretrained(model_name)
    return model, processor

@st.cache_resource
def load_odia_tts_model():
    """Load Odia TTS model"""
    model = VitsModel.from_pretrained("facebook/mms-tts-ory")
    tokenizer = AutoTokenizer.from_pretrained("facebook/mms-tts-ory")
    return model, tokenizer

def odia_stt(audio_file_path):
    """Perform Odia speech-to-text"""
    model, processor = load_odia_stt_model()
    
    # Load audio (mono, 16kHz)
    audio_input, sr = sf.read(audio_file_path)
    
    # Ensure audio is mono and sampled at 16 kHz
    if hasattr(audio_input, 'ndim') and audio_input.ndim > 1:
        audio_input = audio_input.mean(axis=1)
    
    # Resample if needed
    if sr != 16000:
        audio_input = librosa.resample(audio_input.astype(float), orig_sr=sr, target_sr=16000)
        sr = 16000
    
    # Transcribe
    input_values = processor(audio_input, sampling_rate=sr, return_tensors="pt").input_values
    with torch.no_grad():
        logits = model(input_values).logits
    
    predicted_ids = torch.argmax(logits, dim=-1)
    transcription = processor.batch_decode(predicted_ids)[0]
    return transcription

def odia_tts(text):
    """Perform Odia text-to-speech and return audio bytes"""
    model, tokenizer = load_odia_tts_model()
    
    # Tokenize input
    inputs = tokenizer(text, return_tensors="pt")
    
    # Generate speech
    with torch.no_grad():
        output = model(**inputs).waveform
    
    # Convert float waveform (-1 to 1) to int16 PCM
    waveform = output.squeeze().cpu().numpy()
    waveform_int16 = (waveform * 32767).astype("int16")
    
    # Convert to BytesIO
    audio_bytes = BytesIO()
    scipy.io.wavfile.write(audio_bytes, rate=model.config.sampling_rate, data=waveform_int16)
    audio_bytes.seek(0)
    return audio_bytes

def encode_image_to_base64(image_file):
    """Convert uploaded image to base64 format for Gemini API"""
    import base64
    return base64.b64encode(image_file.read()).decode('utf-8')

# ===============================
# Chatbot Section
# ===============================
st.header("ðŸ’¬ AgriVoice Chatbot")

# Get translations for selected language, default to English if not found
lang_key = selected_language if selected_language in TRANSLATIONS else "English"
t = TRANSLATIONS[lang_key]

if st.button("Open Chatbot"):
    st.session_state['show_chatbot'] = True

if st.session_state.get('show_chatbot', False):
    st.markdown("---")
    st.subheader(f"ðŸ¤– {t['chatbot_header']} ({selected_language})")

    if 'chat_history' not in st.session_state:
        st.session_state['chat_history'] = [
            SystemMessage(
                content=(f"You are AgriVoice, a friendly and helpful plant disease assistant trained by Om Sahani. "
                         f"Always respond in {selected_language}. Start with a short and clear answer. "
                         f"IMPORTANT: Reply only in simple text format. Do NOT use any markdown, bold, italics, bullet points, or any other formatting. "
                         f"Do NOT use asterisks (*), hashes (#), dashes (-), or any special characters for formatting. "
                         f"Write your response as plain, simple text only.")
            )
        ]

    if 'recording' not in st.session_state:
        st.session_state['recording'] = False

    # Display Chat History
    for msg in st.session_state['chat_history']:
        if isinstance(msg, HumanMessage):
            # Handle both text-only and multimodal (text + image) messages
            if isinstance(msg.content, str):
                # Text-only message
                st.markdown(f"**ðŸ§‘ You:** {msg.content}")
            elif isinstance(msg.content, list):
                # Multimodal message - extract text and display with image indicator
                text_content = ""
                has_image = False
                image_data = None
                image_type = None
                
                for content_item in msg.content:
                    if isinstance(content_item, dict) and content_item.get("type") == "text":
                        text_content = content_item.get("text", "")
                    elif isinstance(content_item, dict) and content_item.get("type") == "image_url":
                        has_image = True
                        image_url = content_item.get("image_url", {}).get("url", "")
                        if image_url.startswith("data:"):
                            # Extract image data and type from data URL
                            parts = image_url.split(",")
                            image_type = parts[0].replace("data:", "").replace(";base64", "")
                            image_data = base64.b64decode(parts[1])
                
                # Display text with image
                if has_image and image_data:
                    col1, col2 = st.columns([1, 2])
                    with col1:
                        st.image(image_data, caption="Your Image", use_container_width=True)
                    with col2:
                        st.markdown(f"**ðŸ§‘ You:** {text_content}")
                else:
                    st.markdown(f"**ðŸ§‘ You:** {text_content}")
        elif isinstance(msg, SystemMessage):
            continue
        else:
            st.markdown(f"**ðŸ¤– AgriVoice:** {msg.content}")
    
    # Play TTS for the latest bot message (only once after new response)
    if len(st.session_state['chat_history']) > 1 and not isinstance(st.session_state['chat_history'][-1], (HumanMessage, SystemMessage)):
        if 'last_tts_message' not in st.session_state:
            st.session_state['last_tts_message'] = None
        
        latest_bot_message = st.session_state['chat_history'][-1].content
        
        # Only play TTS if this is a new message
        if st.session_state['last_tts_message'] != latest_bot_message:
            st.session_state['last_tts_message'] = latest_bot_message
            try:
                if selected_language == "Odia (à¬“à¬¡à¬¼à¬¿à¬†)":
                    audio_bytes = odia_tts(latest_bot_message)
                    st.audio(audio_bytes, format='audio/wav', autoplay=True)
                else:
                    gtts_lang = language_code.split("-")[0]
                    tts = gTTS(text=latest_bot_message, lang=gtts_lang)
                    audio_bytes = BytesIO()
                    tts.write_to_fp(audio_bytes)
                    audio_bytes.seek(0)
                    st.audio(audio_bytes, format='audio/mp3', autoplay=True)
            except Exception as e:
                st.warning(f"{t['could_not_generate_speech']}{e}")

    # Image Upload Section for Chatbot
    st.write(f"ðŸ–¼ï¸ {t['image_options']}")
    
    # Two options for image
    image_option_col1, image_option_col2 = st.columns(2)
    
    with image_option_col1:
        use_detection_image = st.button(t['use_detection_image'], key="use_detection_image_btn")
    
    with image_option_col2:
        upload_new_image = st.button(t['upload_new_image'], key="upload_new_image_btn")
    
    # Initialize chatbot image state if not exists
    if 'chatbot_image' not in st.session_state:
        st.session_state['chatbot_image'] = None
        st.session_state['is_detection_image_selected'] = False
    
    # If user wants to use disease detection image
    if use_detection_image:
        if 'disease_detection_image' in st.session_state and st.session_state['disease_detection_image'] is not None:
            st.session_state['chatbot_image'] = st.session_state['disease_detection_image']
            st.session_state['is_detection_image_selected'] = True
            st.session_state['show_chatbot_uploader'] = False  # Hide uploader
            col1, col2 = st.columns([1, 2])
            with col1:
                st.image(st.session_state['chatbot_image'], caption=t['using_detection_image'], use_container_width=True)
            with col2:
                st.success(t['using_detection_success'])
        else:
            st.warning(t['no_detection_image'])
    
    # If user wants to upload a new image
    if upload_new_image:
        st.session_state['show_chatbot_uploader'] = True
    
    if st.session_state.get('show_chatbot_uploader', False):
        uploaded_chatbot_image = st.file_uploader(t['upload_chatbot_image'], type=["jpg", "jpeg", "png"], key="chatbot_image_uploader")
        
        if uploaded_chatbot_image is not None:
            st.session_state['chatbot_image'] = uploaded_chatbot_image
            st.session_state['is_detection_image_selected'] = False
            col1, col2 = st.columns([1, 2])
            with col1:
                st.image(st.session_state['chatbot_image'], caption='Uploaded Image for Chat', use_container_width=True)
            with col2:
                st.info(t['image_loaded'])
            
            if st.button(t['clear_image'], key="clear_chatbot_image"):
                st.session_state['chatbot_image'] = None
                st.session_state['is_detection_image_selected'] = False
                st.session_state['show_chatbot_uploader'] = False
                st.rerun()
    
    # Display currently selected image if exists
    if st.session_state['chatbot_image'] is not None and not use_detection_image and not st.session_state.get('show_chatbot_uploader', False):
        col1, col2 = st.columns([1, 2])
        with col1:
            st.image(st.session_state['chatbot_image'], caption=t['using_detection_image'] if st.session_state['is_detection_image_selected'] else 'Selected Image', use_container_width=True)
        with col2:
            if st.button(t['clear_image'], key="clear_selected_image"):
                st.session_state['chatbot_image'] = None
                st.session_state['is_detection_image_selected'] = False
                st.rerun()
    
    chatbot_image = st.session_state['chatbot_image']
    is_detection_image_selected = st.session_state['is_detection_image_selected']

    # Text Input
    user_input = st.text_input(t['type_message'], key=f"chat_input_{len(st.session_state['chat_history'])}")

    # Voice Input
    st.write(t['voice_mode'])
    mic_col, status_col = st.columns([1, 4])
    with mic_col:
        mic_label = t['stop_recording'] if st.session_state['recording'] else t['start_recording']
        mic_button = st.button(mic_label, key="mic_toggle")

    with status_col:
        if st.session_state['recording']:
            st.markdown(f"**{t['recording_status']}**")
        else:
            st.markdown(f"*({t['mic_hint']})*")

    if mic_button:
        if not st.session_state['recording']:
            st.session_state['recording'] = True
            fs = 16000
            st.session_state['audio'] = sd.rec(int(7 * fs), samplerate=fs, channels=1, dtype='int16')
            st.rerun()
        else:
            st.session_state['recording'] = False
            fs = 16000
            audio_data = st.session_state.get('audio')
            filename = "user_audio.wav"
            sf.write(filename, audio_data, fs)
            st.success(t['recording_stopped'])

            # Use Odia STT for Odia language, Google Speech Recognition for others
            if selected_language == "Odia (à¬“à¬¡à¬¼à¬¿à¬†)":
                try:
                    user_input = odia_stt(filename)
                    st.success(f"âœ… {t['you_said']} ({selected_language}): {user_input}")
                except Exception as e:
                    st.error(f"âŒ Odia STT error: {e}")
                    user_input = None
            else:
                recognizer = sr.Recognizer()
                with sr.AudioFile(filename) as source:
                    audio = recognizer.record(source)
                    try:
                        recognizer.energy_threshold = 300
                        recognizer.dynamic_energy_threshold = True
                        user_input = recognizer.recognize_google(audio, language=language_code)
                        st.success(f"âœ… {t['you_said']} ({selected_language}): {user_input}")
                    except sr.UnknownValueError:
                        st.warning(t['could_not_understand'])
                        user_input = None
                    except sr.RequestError as e:
                        st.error(f"{t['speech_error']}{e}")
                        user_input = None

    if user_input:
        try:
            chat = ChatGoogleGenerativeAI(
                model="gemini-2.5-flash",
                google_api_key=GEMINI_API_KEY
            )
            
            # Prepare message content
            if chatbot_image is not None:
                # If image is uploaded, include it with the user message
                from langchain_core.messages import HumanMessage
                
                # Get image data
                image_data = base64.standard_b64encode(chatbot_image.read()).decode("utf-8")
                
                # Determine image type
                image_type = "image/jpeg" if chatbot_image.name.lower().endswith(('.jpg', '.jpeg')) else "image/png"
                
                # Check if this is the disease detection image and if we have a prediction
                prediction_info = ""
                if is_detection_image_selected and 'disease_prediction' in st.session_state:
                    prediction_info = f"\n\nIMPORTANT: My AI model has analyzed this image and predicted: '{st.session_state['disease_prediction']}'\n\nPlease start your response by confirming which plant's leaf this is based on the prediction, then answer my question: {user_input}"
                
                # Create message with image
                message_content = [
                    {
                        "type": "text",
                        "text": user_input if not prediction_info else prediction_info
                    },
                    {
                        "type": "image_url",
                        "image_url": {
                            "url": f"data:{image_type};base64,{image_data}"
                        }
                    }
                ]
                
                st.session_state['chat_history'].append(HumanMessage(content=message_content))
            else:
                # No image, just text
                st.session_state['chat_history'].append(HumanMessage(content=user_input))
            
            response = chat.invoke(st.session_state['chat_history'])
            st.session_state['chat_history'].append(response)
            
            # Rerun to display the updated chat history
            st.rerun()
            
        except Exception as e:
            st.error(f"{t['error']}{e}")
